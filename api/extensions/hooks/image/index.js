"use strict";var e=require("querystring"),t=require("tty"),r=require("util"),n=require("os"),i=require("buffer"),o=require("assert"),a=require("stream"),s=require("events"),u=require("net"),c=require("tls"),l=require("crypto"),f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var d,h={},p={},g=Object.prototype.hasOwnProperty;function m(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function v(e){try{return encodeURIComponent(e)}catch(e){return null}}p.stringify=function(e,t){t=t||"";var r,n,i=[];for(n in"string"!=typeof t&&(t="?"),e)if(g.call(e,n)){if((r=e[n])||null!==r&&r!==d&&!isNaN(r)||(r=""),n=v(n),r=v(r),null===n||null===r)continue;i.push(n+"="+r)}return i.length?t+i.join("&"):""},p.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,n={};t=r.exec(e);){var i=m(t[1]),o=m(t[2]);null===i||null===o||i in n||(n[i]=o)}return n};var w=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e},y=p,b=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,E=/[\n\r\t]/g,I=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,B=/:\d+$/,U=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,C=/^[a-zA-Z]:/;function k(e){return(e||"").toString().replace(b,"")}var x=[["#","hash"],["?","query"],function(e,t){return S(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],T={hash:1,query:1};function O(e){var t,r=("undefined"!=typeof window?window:void 0!==f?f:"undefined"!=typeof self?self:{}).location||{},n={},i=typeof(e=e||r);if("blob:"===e.protocol)n=new L(unescape(e.pathname),{});else if("string"===i)for(t in n=new L(e,{}),T)delete n[t];else if("object"===i){for(t in e)t in T||(n[t]=e[t]);void 0===n.slashes&&(n.slashes=I.test(e.href))}return n}function S(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function N(e,t){e=(e=k(e)).replace(E,""),t=t||{};var r,n=U.exec(e),i=n[1]?n[1].toLowerCase():"",o=!!n[2],a=!!n[3],s=0;return o?a?(r=n[2]+n[3]+n[4],s=n[2].length+n[3].length):(r=n[2]+n[4],s=n[2].length):a?(r=n[3]+n[4],s=n[3].length):r=n[4],"file:"===i?s>=2&&(r=r.slice(2)):S(i)?r=n[4]:i?o&&(r=r.slice(2)):s>=2&&S(t.protocol)&&(r=n[4]),{protocol:i,slashes:o||S(i),slashesCount:s,rest:r}}function L(e,t,r){if(e=(e=k(e)).replace(E,""),!(this instanceof L))return new L(e,t,r);var n,i,o,a,s,u,c=x.slice(),l=typeof t,f=this,d=0;for("object"!==l&&"string"!==l&&(r=t,t=null),r&&"function"!=typeof r&&(r=y.parse),n=!(i=N(e||"",t=O(t))).protocol&&!i.slashes,f.slashes=i.slashes||n&&t.slashes,f.protocol=i.protocol||t.protocol||"",e=i.rest,("file:"===i.protocol&&(2!==i.slashesCount||C.test(e))||!i.slashes&&(i.protocol||i.slashesCount<2||!S(f.protocol)))&&(c[3]=[/(.*)/,"pathname"]);d<c.length;d++)"function"!=typeof(a=c[d])?(o=a[0],u=a[1],o!=o?f[u]=e:"string"==typeof o?~(s="@"===o?e.lastIndexOf(o):e.indexOf(o))&&("number"==typeof a[2]?(f[u]=e.slice(0,s),e=e.slice(s+a[2])):(f[u]=e.slice(s),e=e.slice(0,s))):(s=o.exec(e))&&(f[u]=s[1],e=e.slice(0,s.index)),f[u]=f[u]||n&&a[3]&&t[u]||"",a[4]&&(f[u]=f[u].toLowerCase())):e=a(e,f);r&&(f.query=r(f.query)),n&&t.slashes&&"/"!==f.pathname.charAt(0)&&(""!==f.pathname||""!==t.pathname)&&(f.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(f.pathname,t.pathname)),"/"!==f.pathname.charAt(0)&&S(f.protocol)&&(f.pathname="/"+f.pathname),w(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(~(s=f.auth.indexOf(":"))?(f.username=f.auth.slice(0,s),f.username=encodeURIComponent(decodeURIComponent(f.username)),f.password=f.auth.slice(s+1),f.password=encodeURIComponent(decodeURIComponent(f.password))):f.username=encodeURIComponent(decodeURIComponent(f.auth)),f.auth=f.password?f.username+":"+f.password:f.username),f.origin="file:"!==f.protocol&&S(f.protocol)&&f.host?f.protocol+"//"+f.host:"null",f.href=f.toString()}L.prototype={set:function(e,t,r){var n=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||y.parse)(t)),n[e]=t;break;case"port":n[e]=t,w(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,B.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";n[e]=t.charAt(0)!==i?i+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var o=t.indexOf(":");~o?(n.username=t.slice(0,o),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(o+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var a=0;a<x.length;a++){var s=x[a];s[4]&&(n[s[1]]=n[s[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin="file:"!==n.protocol&&S(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n},toString:function(e){e&&"function"==typeof e||(e=y.stringify);var t,r=this,n=r.host,i=r.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(r.protocol&&r.slashes||S(r.protocol)?"//":"");return r.username?(o+=r.username,r.password&&(o+=":"+r.password),o+="@"):r.password?(o+=":"+r.password,o+="@"):"file:"!==r.protocol&&S(r.protocol)&&!n&&"/"!==r.pathname&&(o+="@"),(":"===n[n.length-1]||B.test(r.hostname)&&!r.port)&&(n+=":"),o+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}},L.extractProtocol=N,L.location=O,L.trimLeft=k,L.qs=y;var F=L,M={},R={},_={},A={};!function(e){var t=4294967296,r=1/t,n=9007199254740991;function i(e){return e<=n&&e>=-n}function o(e,t,r){if("number"!=typeof(e=+e)||e<t||e>r||Math.floor(e)!==e)throw new TypeError('"value" argument is out of bounds');return e}function a(e,t,r){if(t<0||t+r>e.length)throw new RangeError("Index out of range")}e.exports.isContiguousInt=i,e.exports.assertContiguousInt=function(e){if(!i(e))throw new TypeError("number cannot be represented as a contiguous integer")},["UInt","Int"].forEach((function(t){var r=t+"8";e.exports["read"+r]=Buffer.prototype["read"+r].call,e.exports["write"+r]=Buffer.prototype["write"+r].call,["16","32"].forEach((function(r){["LE","BE"].forEach((function(n){var i=t+r+n,o=Buffer.prototype["read"+i];e.exports["read"+i]=function(e,t){return o.call(e,t)};var a=Buffer.prototype["write"+i];e.exports["write"+i]=function(e,t,r){return a.call(e,t,r)}}))}))})),e.exports.readUInt24BE=function(e,t){return e.readUInt8(t)<<16|e.readUInt16BE(t+1)},e.exports.writeUInt24BE=function(e,t,r){t=o(t,0,16777215),a(e,r,3),e.writeUInt8(t>>>16,r),e.writeUInt16BE(65535&t,r+1)},e.exports.readUInt40BE=function(e,r){return(e.readUInt8(r)||0)*t+e.readUInt32BE(r+1)},e.exports.writeUInt40BE=function(e,t,n){t=o(t,0,0xffffffffff),a(e,n,5),e.writeUInt8(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+1)},e.exports.readUInt48BE=function(e,r){return e.readUInt16BE(r)*t+e.readUInt32BE(r+2)},e.exports.writeUInt48BE=function(e,t,n){t=o(t,0,0xffffffffffff),a(e,n,6),e.writeUInt16BE(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+2)},e.exports.readUInt56BE=function(e,r){return((e.readUInt8(r)||0)<<16|e.readUInt16BE(r+1))*t+e.readUInt32BE(r+3)},e.exports.writeUInt56BE=function(e,t,n){if(t=o(t,0,72057594037927940),a(e,n,7),t<72057594037927940){var i=Math.floor(t*r);e.writeUInt8(i>>>16,n),e.writeUInt16BE(65535&i,n+1),e.writeInt32BE(-1&t,n+3)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255},e.exports.readUInt64BE=function(e,r){return e.readUInt32BE(r)*t+e.readUInt32BE(r+4)},e.exports.writeUInt64BE=function(e,t,n){t=o(t,0,0x10000000000000000),a(e,n,8),t<0x10000000000000000?(e.writeUInt32BE(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+4)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)},e.exports.readUInt24LE=function(e,t){return e.readUInt8(t+2)<<16|e.readUInt16LE(t)},e.exports.writeUInt24LE=function(e,t,r){t=o(t,0,16777215),a(e,r,3),e.writeUInt16LE(65535&t,r),e.writeUInt8(t>>>16,r+2)},e.exports.readUInt40LE=function(e,r){return(e.readUInt8(r+4)||0)*t+e.readUInt32LE(r)},e.exports.writeUInt40LE=function(e,t,n){t=o(t,0,0xffffffffff),a(e,n,5),e.writeInt32LE(-1&t,n),e.writeUInt8(Math.floor(t*r),n+4)},e.exports.readUInt48LE=function(e,r){return e.readUInt16LE(r+4)*t+e.readUInt32LE(r)},e.exports.writeUInt48LE=function(e,t,n){t=o(t,0,0xffffffffffff),a(e,n,6),e.writeInt32LE(-1&t,n),e.writeUInt16LE(Math.floor(t*r),n+4)},e.exports.readUInt56LE=function(e,r){return((e.readUInt8(r+6)||0)<<16|e.readUInt16LE(r+4))*t+e.readUInt32LE(r)},e.exports.writeUInt56LE=function(e,t,n){if(t=o(t,0,72057594037927940),a(e,n,7),t<72057594037927940){e.writeInt32LE(-1&t,n);var i=Math.floor(t*r);e.writeUInt16LE(65535&i,n+4),e.writeUInt8(i>>>16,n+6)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255},e.exports.readUInt64LE=function(e,r){return e.readUInt32LE(r+4)*t+e.readUInt32LE(r)},e.exports.writeUInt64LE=function(e,t,n){t=o(t,0,0x10000000000000000),a(e,n,8),t<0x10000000000000000?(e.writeInt32LE(-1&t,n),e.writeUInt32LE(Math.floor(t*r),n+4)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)},e.exports.readInt24BE=function(e,t){return(e.readInt8(t)<<16)+e.readUInt16BE(t+1)},e.exports.writeInt24BE=function(e,t,r){t=o(t,-8388608,8388607),a(e,r,3),e.writeInt8(t>>16,r),e.writeUInt16BE(65535&t,r+1)},e.exports.readInt40BE=function(e,r){return(e.readInt8(r)||0)*t+e.readUInt32BE(r+1)},e.exports.writeInt40BE=function(e,t,n){t=o(t,-549755813888,549755813887),a(e,n,5),e.writeInt8(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+1)},e.exports.readInt48BE=function(e,r){return e.readInt16BE(r)*t+e.readUInt32BE(r+2)},e.exports.writeInt48BE=function(e,t,n){t=o(t,-0x800000000000,0x7fffffffffff),a(e,n,6),e.writeInt16BE(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+2)},e.exports.readInt56BE=function(e,r){return(((e.readInt8(r)||0)<<16)+e.readUInt16BE(r+1))*t+e.readUInt32BE(r+3)},e.exports.writeInt56BE=function(e,t,n){if(t=o(t,-0x800000000000000,0x80000000000000),a(e,n,7),t<0x80000000000000){var i=Math.floor(t*r);e.writeInt8(i>>16,n),e.writeUInt16BE(65535&i,n+1),e.writeInt32BE(-1&t,n+3)}else e[n]=127,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255},e.exports.readInt64BE=function(e,r){return e.readInt32BE(r)*t+e.readUInt32BE(r+4)},e.exports.writeInt64BE=function(e,t,n){t=o(t,-23611832414348226e5,0x8000000000000000),a(e,n,8),t<0x8000000000000000?(e.writeInt32BE(Math.floor(t*r),n),e.writeInt32BE(-1&t,n+4)):(e[n]=127,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=255)},e.exports.readInt24LE=function(e,t){return(e.readInt8(t+2)<<16)+e.readUInt16LE(t)},e.exports.writeInt24LE=function(e,t,r){t=o(t,-8388608,8388607),a(e,r,3),e.writeUInt16LE(65535&t,r),e.writeInt8(t>>16,r+2)},e.exports.readInt40LE=function(e,r){return(e.readInt8(r+4)||0)*t+e.readUInt32LE(r)},e.exports.writeInt40LE=function(e,t,n){t=o(t,-549755813888,549755813887),a(e,n,5),e.writeInt32LE(-1&t,n),e.writeInt8(Math.floor(t*r),n+4)},e.exports.readInt48LE=function(e,r){return e.readInt16LE(r+4)*t+e.readUInt32LE(r)},e.exports.writeInt48LE=function(e,t,n){t=o(t,-0x800000000000,0x7fffffffffff),a(e,n,6),e.writeInt32LE(-1&t,n),e.writeInt16LE(Math.floor(t*r),n+4)},e.exports.readInt56LE=function(e,r){return(((e.readInt8(r+6)||0)<<16)+e.readUInt16LE(r+4))*t+e.readUInt32LE(r)},e.exports.writeInt56LE=function(e,t,n){if(t=o(t,-0x80000000000000,0x80000000000000),a(e,n,7),t<0x80000000000000){e.writeInt32LE(-1&t,n);var i=Math.floor(t*r);e.writeUInt16LE(65535&i,n+4),e.writeInt8(i>>16,n+6)}else e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=127},e.exports.readInt64LE=function(e,r){return e.readInt32LE(r+4)*t+e.readUInt32LE(r)},e.exports.writeInt64LE=function(e,t,n){t=o(t,-0x8000000000000000,0x8000000000000000),a(e,n,8),t<0x8000000000000000?(e.writeInt32LE(-1&t,n),e.writeInt32LE(Math.floor(t*r),n+4)):(e[n]=255,e[n+1]=255,e[n+2]=255,e[n+3]=255,e[n+4]=255,e[n+5]=255,e[n+6]=255,e[n+7]=127)}}({get exports(){return A},set exports(e){A=e}});var D=A;function q(e,t,r){var n=r;for(var i in r+=4,t)if(void 0!==t[i]){var o=Buffer.byteLength(i);e.writeUInt8(o,r),r++,e.write(i,r,"utf8"),r+=o,r+=j(e,t[i],r)}var a=r-n;return e.writeUInt32BE(a-4,n),a}function j(e,t,r){var n,i=r,o=typeof t,a=t;function s(t){e.write(t,r),r++}switch(t&&"object"===o&&t.hasOwnProperty("!")&&(a=t.value,o=t["!"]),"number"==o&&(o=(n=a)>=0x8000000000000000||Math.abs(n)<0x4000000000000&&Math.floor(n)!==n?"double":a<128&&a>=-128?"byte":a>=-32768&&a<32768?"short":a>=-2147483648&&a<2147483648?"int":"long"),o){case"string":var u=Buffer.byteLength(a,"utf8");s("S"),e.writeUInt32BE(u,r),r+=4,e.write(a,r,"utf8"),r+=u;break;case"object":null===a?s("V"):Array.isArray(a)?(s("A"),r+=function(e,t,r){var n=r;r+=4;for(var i=0,o=t.length;i<o;i++)r+=j(e,t[i],r);var a=r-n;return e.writeUInt32BE(a-4,n),a}(e,a,r)):Buffer.isBuffer(a)?(s("x"),e.writeUInt32BE(a.length,r),r+=4,a.copy(e,r),r+=a.length):(s("F"),r+=q(e,a,r));break;case"boolean":s("t"),e.writeUInt8(a?1:0,r),r++;break;case"double":case"float64":s("d"),e.writeDoubleBE(a,r),r+=8;break;case"byte":case"int8":s("b"),e.writeInt8(a,r),r++;break;case"short":case"int16":s("s"),e.writeInt16BE(a,r),r+=2;break;case"int":case"int32":s("I"),e.writeInt32BE(a,r),r+=4;break;case"long":case"int64":s("l"),D.writeInt64BE(e,a,r),r+=8;break;case"timestamp":s("T"),D.writeUInt64BE(e,a,r),r+=8;break;case"float":s("f"),e.writeFloatBE(a,r),r+=4;break;case"decimal":if(s("D"),!(a.hasOwnProperty("places")&&a.hasOwnProperty("digits")&&a.places>=0&&a.places<256))throw new TypeError("Decimal value must be {'places': 0..255, 'digits': uint32}, got "+JSON.stringify(a));e[r]=a.places,r++,e.writeUInt32BE(a.digits,r),r+=4;break;default:throw new TypeError("Unknown type to encode: "+o)}return r-i}_.encodeTable=q,_.decodeFields=function e(t){var r,n,i,o={},a=0,s=t.length;function u(){var n=String.fromCharCode(t[a]);switch(a++,n){case"b":i=t.readInt8(a),a++;break;case"S":r=t.readUInt32BE(a),a+=4,i=t.toString("utf8",a,a+r),a+=r;break;case"I":i=t.readInt32BE(a),a+=4;break;case"D":var o=t[a];a++;var s=t.readUInt32BE(a);a+=4,i={"!":"decimal",value:{places:o,digits:s}};break;case"T":i=D.readUInt64BE(t,a),a+=8,i={"!":"timestamp",value:i};break;case"F":r=t.readUInt32BE(a),a+=4,i=e(t.slice(a,a+r)),a+=r;break;case"A":r=t.readUInt32BE(a),function(e){var t=[];for(;a<e;)u(),t.push(i);i=t}((a+=4)+r);break;case"d":i=t.readDoubleBE(a),a+=8;break;case"f":i=t.readFloatBE(a),a+=4;break;case"l":i=D.readInt64BE(t,a),a+=8;break;case"s":i=t.readInt16BE(a),a+=2;break;case"t":i=0!=t[a],a++;break;case"V":i=null;break;case"x":r=t.readUInt32BE(a),a+=4,i=t.slice(a,a+r),a+=r;break;default:throw new TypeError('Unexpected type tag "'+n+'"')}}for(;a<s;)r=t.readUInt8(a),a++,n=t.toString("utf8",a,a+r),a+=r,u(),o[n]=i;return o};var z=_,P=A,Q=z.encodeTable,K=z.decodeFields,H=Buffer.alloc(65536);R.constants={FRAME_METHOD:1,FRAME_HEADER:2,FRAME_BODY:3,FRAME_HEARTBEAT:8,FRAME_MIN_SIZE:4096,FRAME_END:206,REPLY_SUCCESS:200,CONTENT_TOO_LARGE:311,NO_ROUTE:312,NO_CONSUMERS:313,ACCESS_REFUSED:403,NOT_FOUND:404,RESOURCE_LOCKED:405,PRECONDITION_FAILED:406,CONNECTION_FORCED:320,INVALID_PATH:402,FRAME_ERROR:501,SYNTAX_ERROR:502,COMMAND_INVALID:503,CHANNEL_ERROR:504,UNEXPECTED_FRAME:505,RESOURCE_ERROR:506,NOT_ALLOWED:530,NOT_IMPLEMENTED:540,INTERNAL_ERROR:541},R.constant_strs={1:"FRAME-METHOD",2:"FRAME-HEADER",3:"FRAME-BODY",8:"FRAME-HEARTBEAT",200:"REPLY-SUCCESS",206:"FRAME-END",311:"CONTENT-TOO-LARGE",312:"NO-ROUTE",313:"NO-CONSUMERS",320:"CONNECTION-FORCED",402:"INVALID-PATH",403:"ACCESS-REFUSED",404:"NOT-FOUND",405:"RESOURCE-LOCKED",406:"PRECONDITION-FAILED",501:"FRAME-ERROR",502:"SYNTAX-ERROR",503:"COMMAND-INVALID",504:"CHANNEL-ERROR",505:"UNEXPECTED-FRAME",506:"RESOURCE-ERROR",530:"NOT-ALLOWED",540:"NOT-IMPLEMENTED",541:"INTERNAL-ERROR",4096:"FRAME-MIN-SIZE"},R.FRAME_OVERHEAD=8,R.decode=function(e,t){switch(e){case 655370:return a={versionMajor:void 0,versionMinor:void 0,serverProperties:void 0,mechanisms:void 0,locales:void 0},n=(r=t)[o=0],o++,a.versionMajor=n,n=r[o],o++,a.versionMinor=n,i=r.readUInt32BE(o),o+=4,n=K(r.slice(o,o+i)),o+=i,a.serverProperties=n,i=r.readUInt32BE(o),o+=4,n=r.slice(o,o+i),o+=i,a.mechanisms=n,i=r.readUInt32BE(o),o+=4,n=r.slice(o,o+i),o+=i,a.locales=n,a;case 655371:return function(e){var t,r,n=0,i={clientProperties:void 0,mechanism:void 0,response:void 0,locale:void 0};return r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.clientProperties=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.mechanism=t,r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.response=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.locale=t,i}(t);case 655380:return function(e){var t,r,n=0,i={challenge:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.challenge=t,i}(t);case 655381:return function(e){var t,r,n=0,i={response:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.response=t,i}(t);case 655390:return function(e){var t,r=0,n={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(r),r+=2,n.channelMax=t,t=e.readUInt32BE(r),r+=4,n.frameMax=t,t=e.readUInt16BE(r),r+=2,n.heartbeat=t,n}(t);case 655391:return function(e){var t,r=0,n={channelMax:void 0,frameMax:void 0,heartbeat:void 0};return t=e.readUInt16BE(r),r+=2,n.channelMax=t,t=e.readUInt32BE(r),r+=4,n.frameMax=t,t=e.readUInt16BE(r),r+=2,n.heartbeat=t,n}(t);case 655400:return function(e){var t,r,n=0,i={virtualHost:void 0,capabilities:void 0,insist:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.virtualHost=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.capabilities=t,t=!!(1&e[n]),i.insist=t,i}(t);case 655401:return function(e){var t,r,n=0,i={knownHosts:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.knownHosts=t,i}(t);case 655410:return function(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,t=e.readUInt16BE(n),n+=2,i.classId=t,t=e.readUInt16BE(n),n+=2,i.methodId=t,i}(t);case 655411:case 655421:case 1310761:case 2621451:case 2621461:case 2621471:case 2621491:case 3276821:case 3276851:case 3932171:case 3932271:case 5898250:case 5898251:case 5898260:case 5898261:case 5898270:case 5898271:case 5570571:return{};case 655420:return function(e){var t,r,n=0,i={reason:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.reason=t,i}(t);case 1310730:return function(e){var t,r,n=0,i={outOfBand:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.outOfBand=t,i}(t);case 1310731:return function(e){var t,r,n=0,i={channelId:void 0};return r=e.readUInt32BE(n),n+=4,t=e.slice(n,n+r),n+=r,i.channelId=t,i}(t);case 1310740:return function(e){var t,r={active:void 0};return t=!!(1&e[0]),r.active=t,r}(t);case 1310741:return function(e){var t,r={active:void 0};return t=!!(1&e[0]),r.active=t,r}(t);case 1310760:return function(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,classId:void 0,methodId:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,t=e.readUInt16BE(n),n+=2,i.classId=t,t=e.readUInt16BE(n),n+=2,i.methodId=t,i}(t);case 1966090:return function(e){var t,r,n=0,i={realm:void 0,exclusive:void 0,passive:void 0,active:void 0,write:void 0,read:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.realm=t,t=!!(1&e[n]),i.exclusive=t,t=!!(2&e[n]),i.passive=t,t=!!(4&e[n]),i.active=t,t=!!(8&e[n]),i.write=t,t=!!(16&e[n]),i.read=t,i}(t);case 1966091:return function(e){var t,r=0,n={ticket:void 0};return t=e.readUInt16BE(r),r+=2,n.ticket=t,n}(t);case 2621450:return function(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,type:void 0,passive:void 0,durable:void 0,autoDelete:void 0,internal:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.type=t,t=!!(1&e[n]),i.passive=t,t=!!(2&e[n]),i.durable=t,t=!!(4&e[n]),i.autoDelete=t,t=!!(8&e[n]),i.internal=t,t=!!(16&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 2621460:return function(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,ifUnused:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,t=!!(1&e[n]),i.ifUnused=t,t=!!(2&e[n]),i.nowait=t,i}(t);case 2621470:return function(e){var t,r,n=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 2621480:return function(e){var t,r,n=0,i={ticket:void 0,destination:void 0,source:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.destination=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.source=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 3276810:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,passive:void 0,durable:void 0,exclusive:void 0,autoDelete:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.passive=t,t=!!(2&e[n]),i.durable=t,t=!!(4&e[n]),i.exclusive=t,t=!!(8&e[n]),i.autoDelete=t,t=!!(16&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 3276811:return function(e){var t,r,n=0,i={queue:void 0,messageCount:void 0,consumerCount:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=e.readUInt32BE(n),n+=4,i.messageCount=t,t=e.readUInt32BE(n),n+=4,i.consumerCount=t,i}(t);case 3276820:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 3276830:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.nowait=t,i}(t);case 3276831:return function(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}(t);case 3276840:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,ifUnused:void 0,ifEmpty:void 0,nowait:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.ifUnused=t,t=!!(2&e[n]),i.ifEmpty=t,t=!!(4&e[n]),i.nowait=t,i}(t);case 3276841:return function(e){var t,r=0,n={messageCount:void 0};return t=e.readUInt32BE(r),r+=4,n.messageCount=t,n}(t);case 3276850:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,exchange:void 0,routingKey:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 3932170:return function(e){var t,r=0,n={prefetchSize:void 0,prefetchCount:void 0,global:void 0};return t=e.readUInt32BE(r),r+=4,n.prefetchSize=t,t=e.readUInt16BE(r),r+=2,n.prefetchCount=t,t=!!(1&e[r]),n.global=t,n}(t);case 3932180:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,consumerTag:void 0,noLocal:void 0,noAck:void 0,exclusive:void 0,nowait:void 0,arguments:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=!!(1&e[n]),i.noLocal=t,t=!!(2&e[n]),i.noAck=t,t=!!(4&e[n]),i.exclusive=t,t=!!(8&e[n]),i.nowait=t,n++,r=e.readUInt32BE(n),n+=4,t=K(e.slice(n,n+r)),n+=r,i.arguments=t,i}(t);case 3932181:return function(e){var t,r,n=0,i={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,i}(t);case 3932190:return function(e){var t,r,n=0,i={consumerTag:void 0,nowait:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=!!(1&e[n]),i.nowait=t,i}(t);case 3932191:return function(e){var t,r,n=0,i={consumerTag:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,i}(t);case 3932200:return function(e){var t,r,n=0,i={ticket:void 0,exchange:void 0,routingKey:void 0,mandatory:void 0,immediate:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=!!(1&e[n]),i.mandatory=t,t=!!(2&e[n]),i.immediate=t,i}(t);case 3932210:return function(e){var t,r,n=0,i={replyCode:void 0,replyText:void 0,exchange:void 0,routingKey:void 0};return t=e.readUInt16BE(n),n+=2,i.replyCode=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.replyText=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,i}(t);case 3932220:return function(e){var t,r,n=0,i={consumerTag:void 0,deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.consumerTag=t,t=P.readUInt64BE(e,n),n+=8,i.deliveryTag=t,t=!!(1&e[n]),i.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,i}(t);case 3932230:return function(e){var t,r,n=0,i={ticket:void 0,queue:void 0,noAck:void 0};return t=e.readUInt16BE(n),n+=2,i.ticket=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.queue=t,t=!!(1&e[n]),i.noAck=t,i}(t);case 3932231:return function(e){var t,r,n=0,i={deliveryTag:void 0,redelivered:void 0,exchange:void 0,routingKey:void 0,messageCount:void 0};return t=P.readUInt64BE(e,n),n+=8,i.deliveryTag=t,t=!!(1&e[n]),i.redelivered=t,n++,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.exchange=t,r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.routingKey=t,t=e.readUInt32BE(n),n+=4,i.messageCount=t,i}(t);case 3932232:return function(e){var t,r,n=0,i={clusterId:void 0};return r=e.readUInt8(n),n++,t=e.toString("utf8",n,n+r),n+=r,i.clusterId=t,i}(t);case 3932240:return function(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0};return t=P.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,n}(t);case 3932250:return function(e){var t,r=0,n={deliveryTag:void 0,requeue:void 0};return t=P.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.requeue=t,n}(t);case 3932260:return function(e){var t,r={requeue:void 0};return t=!!(1&e[0]),r.requeue=t,r}(t);case 3932270:return function(e){var t,r={requeue:void 0};return t=!!(1&e[0]),r.requeue=t,r}(t);case 3932280:return function(e){var t,r=0,n={deliveryTag:void 0,multiple:void 0,requeue:void 0};return t=P.readUInt64BE(e,r),r+=8,n.deliveryTag=t,t=!!(1&e[r]),n.multiple=t,t=!!(2&e[r]),n.requeue=t,n}(t);case 5570570:return function(e){var t,r={nowait:void 0};return t=!!(1&e[0]),r.nowait=t,r}(t);case 60:return function(e){var t,r,n,i=2;if(0===(t=e.readUInt16BE(0)))return{};var o={contentType:void 0,contentEncoding:void 0,headers:void 0,deliveryMode:void 0,priority:void 0,correlationId:void 0,replyTo:void 0,expiration:void 0,messageId:void 0,timestamp:void 0,type:void 0,userId:void 0,appId:void 0,clusterId:void 0};return 32768&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.contentType=r),16384&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.contentEncoding=r),8192&t&&(n=e.readUInt32BE(i),i+=4,r=K(e.slice(i,i+n)),i+=n,o.headers=r),4096&t&&(r=e[i],i++,o.deliveryMode=r),2048&t&&(r=e[i],i++,o.priority=r),1024&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.correlationId=r),512&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.replyTo=r),256&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.expiration=r),128&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.messageId=r),64&t&&(r=P.readUInt64BE(e,i),i+=8,o.timestamp=r),32&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.type=r),16&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.userId=r),8&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.appId=r),4&t&&(n=e.readUInt8(i),i++,r=e.toString("utf8",i,i+n),i+=n,o.clusterId=r),o}(t);default:throw new Error("Unknown class/method ID")}
/** @preserve This file is generated by the script
 * ../bin/generate-defs.js, which is not in general included in a
 * distribution, but is available in the source repository e.g. at
 * https://github.com/squaremo/amqp.node/
 */
var r,n,i,o,a},R.encodeMethod=function(e,t,r){switch(e){case 655370:return function(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.serverProperties))throw new Error("Missing value for mandatory field 'serverProperties'");if("object"!=typeof i)throw new TypeError("Field 'serverProperties' is the wrong type; must be an object");r=Q(H,i,a);var s=H.slice(a,a+r);if(a+=r,o+=s.length,void 0===(i=t.mechanisms))i=Buffer.from("PLAIN");else if(!Buffer.isBuffer(i))throw new TypeError("Field 'mechanisms' is the wrong type; must be a Buffer");if(o+=i.length,void 0===(i=t.locales))i=Buffer.from("en_US");else if(!Buffer.isBuffer(i))throw new TypeError("Field 'locales' is the wrong type; must be a Buffer");o+=i.length;var u=Buffer.alloc(22+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(655370,7),n=11,void 0===(i=t.versionMajor))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'versionMajor' is the wrong type; must be a number (but not NaN)");if(u.writeUInt8(i,n),n++,void 0===(i=t.versionMinor))i=9;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'versionMinor' is the wrong type; must be a number (but not NaN)");return u.writeUInt8(i,n),n++,n+=s.copy(u,n),void 0===(i=t.mechanisms)&&(i=Buffer.from("PLAIN")),r=i.length,u.writeUInt32BE(r,n),n+=4,i.copy(u,n),n+=r,void 0===(i=t.locales)&&(i=Buffer.from("en_US")),r=i.length,u.writeUInt32BE(r,n),n+=4,i.copy(u,n),u[n+=r]=206,u.writeUInt32BE(n-7,3),u}(t,r);case 655371:return function(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.clientProperties))throw new Error("Missing value for mandatory field 'clientProperties'");if("object"!=typeof i)throw new TypeError("Field 'clientProperties' is the wrong type; must be an object");r=Q(H,i,a);var s=H.slice(a,a+r);if(a+=r,o+=s.length,void 0===(i=t.mechanism))i="PLAIN";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'mechanism' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(o+=u,void 0===(i=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(i))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");if(o+=i.length,void 0===(i=t.locale))i="en_US";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'locale' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");o+=c;var l=Buffer.alloc(18+o);return l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(655371,7),n=11,n+=s.copy(l,n),void 0===(i=t.mechanism)&&(i="PLAIN"),l[n]=u,n++,l.write(i,n,"utf8"),n+=u,void 0===(i=t.response)&&(i=Buffer.from(void 0)),r=i.length,l.writeUInt32BE(r,n),n+=4,i.copy(l,n),n+=r,void 0===(i=t.locale)&&(i="en_US"),l[n]=c,n++,l.write(i,n,"utf8"),l[n+=c]=206,l.writeUInt32BE(n-7,3),l}(t,r);case 655380:return function(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.challenge))throw new Error("Missing value for mandatory field 'challenge'");if(!Buffer.isBuffer(i))throw new TypeError("Field 'challenge' is the wrong type; must be a Buffer");o+=i.length;var a=Buffer.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655380,7),n=11,void 0===(i=t.challenge)&&(i=Buffer.from(void 0)),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 655381:return function(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.response))throw new Error("Missing value for mandatory field 'response'");if(!Buffer.isBuffer(i))throw new TypeError("Field 'response' is the wrong type; must be a Buffer");o+=i.length;var a=Buffer.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655381,7),n=11,void 0===(i=t.response)&&(i=Buffer.from(void 0)),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 655390:return function(e,t){var r=0,n=null,i=Buffer.alloc(20);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(655390,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),i[r+=2]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 655391:return function(e,t){var r=0,n=null,i=Buffer.alloc(20);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(655391,7),r=11,void 0===(n=t.channelMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'channelMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt16BE(n,r),r+=2,void 0===(n=t.frameMax))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'frameMax' is the wrong type; must be a number (but not NaN)");if(i.writeUInt32BE(n,r),r+=4,void 0===(n=t.heartbeat))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'heartbeat' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),i[r+=2]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 655400:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.virtualHost))n="/";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'virtualHost' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(o+=a,void 0===(n=t.capabilities))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'capabilities' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");o+=s;var u=Buffer.alloc(15+o);return u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(655400,7),r=11,void 0===(n=t.virtualHost)&&(n="/"),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.capabilities)&&(n=""),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,void 0===(n=t.insist)&&(n=!1),n&&(i+=1),u[r]=i,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 655401:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.knownHosts))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'knownHosts' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655401,7),r=11,void 0===(n=t.knownHosts)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655410:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(19+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655410,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),a[r+=2]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655411:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(655411,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 655420:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.reason))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'reason' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(655420,7),r=11,void 0===(n=t.reason)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 655421:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(655421,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 1310730:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.outOfBand))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'outOfBand' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310730,7),r=11,void 0===(n=t.outOfBand)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 1310731:return function(e,t){var r,n=0,i=null,o=0;if(void 0===(i=t.channelId))i=Buffer.from("");else if(!Buffer.isBuffer(i))throw new TypeError("Field 'channelId' is the wrong type; must be a Buffer");o+=i.length;var a=Buffer.alloc(16+o);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310731,7),n=11,void 0===(i=t.channelId)&&(i=Buffer.from("")),r=i.length,a.writeUInt32BE(r,n),n+=4,i.copy(a,n),a[n+=r]=206,a.writeUInt32BE(n-7,3),a}(t,r);case 1310740:return function(e,t){var r,n=0,i=0,o=Buffer.alloc(13);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1310740,7),n=11,void 0===(r=t.active))throw new Error("Missing value for mandatory field 'active'");return r&&(i+=1),o[n]=i,o[++n]=206,o.writeUInt32BE(n-7,3),o}(t,r);case 1310741:return function(e,t){var r,n=0,i=0,o=Buffer.alloc(13);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(1310741,7),n=11,void 0===(r=t.active))throw new Error("Missing value for mandatory field 'active'");return r&&(i+=1),o[n]=i,o[++n]=206,o.writeUInt32BE(n-7,3),o}(t,r);case 1310760:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(19+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(1310760,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.classId))throw new Error("Missing value for mandatory field 'classId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'classId' is the wrong type; must be a number (but not NaN)");if(a.writeUInt16BE(n,r),r+=2,void 0===(n=t.methodId))throw new Error("Missing value for mandatory field 'methodId'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'methodId' is the wrong type; must be a number (but not NaN)");return a.writeUInt16BE(n,r),a[r+=2]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 1310761:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(1310761,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 1966090:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.realm))n="/data";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'realm' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(14+o);return s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(1966090,7),r=11,void 0===(n=t.realm)&&(n="/data"),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.exclusive)&&(n=!1),n&&(i+=1),void 0===(n=t.passive)&&(n=!0),n&&(i+=2),void 0===(n=t.active)&&(n=!0),n&&(i+=4),void 0===(n=t.write)&&(n=!0),n&&(i+=8),void 0===(n=t.read)&&(n=!0),n&&(i+=16),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 1966091:return function(e,t){var r=0,n=null,i=Buffer.alloc(14);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(1966091,7),r=11,void 0===(n=t.ticket))n=1;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return i.writeUInt16BE(n,r),i[r+=2]=206,i.writeUInt32BE(r-7,3),i}(t,r);case 2621450:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.type))i="direct";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(a+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var l=H.slice(s,s+r);s+=r,a+=l.length;var f=Buffer.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(2621450,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,void 0===(i=t.exchange)&&(i=void 0),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,void 0===(i=t.type)&&(i="direct"),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,void 0===(i=t.passive)&&(i=!1),i&&(o+=1),void 0===(i=t.durable)&&(i=!1),i&&(o+=2),void 0===(i=t.autoDelete)&&(i=!1),i&&(o+=4),void 0===(i=t.internal)&&(i=!1),i&&(o+=8),void 0===(i=t.nowait)&&(i=!1),i&&(o+=16),f[n]=o,n++,o=0,f[n+=l.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 2621451:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621451,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621460:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(2621460,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,void 0===(n=t.exchange)&&(n=void 0),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.ifUnused)&&(n=!1),n&&(i+=1),void 0===(n=t.nowait)&&(n=!1),n&&(i+=2),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 2621461:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621461,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621470:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Buffer.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var f=H.slice(s,s+r);s+=r,a+=f.length;var d=Buffer.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(2621470,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,void 0===(i=t.destination)&&(i=void 0),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,void 0===(i=t.source)&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,void 0===(i=t.routingKey)&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,void 0===(i=t.nowait)&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,d[n+=f.copy(d,n)]=206,d.writeUInt32BE(n-7,3),d}(t,r);case 2621471:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621471,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 2621480:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.destination))throw new Error("Missing value for mandatory field 'destination'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'destination' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.source))throw new Error("Missing value for mandatory field 'source'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'source' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Buffer.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var f=H.slice(s,s+r);s+=r,a+=f.length;var d=Buffer.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(2621480,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,void 0===(i=t.destination)&&(i=void 0),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,void 0===(i=t.source)&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,void 0===(i=t.routingKey)&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,void 0===(i=t.nowait)&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,d[n+=f.copy(d,n)]=206,d.writeUInt32BE(n-7,3),d}(t,r);case 2621491:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(2621491,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3276810:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var c=H.slice(s,s+r);s+=r,a+=c.length;var l=Buffer.alloc(16+a);if(l[0]=1,l.writeUInt16BE(e,1),l.writeUInt32BE(3276810,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return l.writeUInt16BE(i,n),n+=2,void 0===(i=t.queue)&&(i=""),l[n]=u,n++,l.write(i,n,"utf8"),n+=u,void 0===(i=t.passive)&&(i=!1),i&&(o+=1),void 0===(i=t.durable)&&(i=!1),i&&(o+=2),void 0===(i=t.exclusive)&&(i=!1),i&&(o+=4),void 0===(i=t.autoDelete)&&(i=!1),i&&(o+=8),void 0===(i=t.nowait)&&(i=!1),i&&(o+=16),l[n]=o,n++,o=0,l[n+=c.copy(l,n)]=206,l.writeUInt32BE(n-7,3),l}(t,r);case 3276811:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.queue))throw new Error("Missing value for mandatory field 'queue'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(21+i);if(a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3276811,7),r=11,void 0===(n=t.queue)&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),r+=o,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");if(a.writeUInt32BE(n,r),r+=4,void 0===(n=t.consumerCount))throw new Error("Missing value for mandatory field 'consumerCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'consumerCount' is the wrong type; must be a number (but not NaN)");return a.writeUInt32BE(n,r),a[r+=4]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3276820:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(a+=c,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var l=Buffer.byteLength(i,"utf8");if(a+=l,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var f=H.slice(s,s+r);s+=r,a+=f.length;var d=Buffer.alloc(18+a);if(d[0]=1,d.writeUInt16BE(e,1),d.writeUInt32BE(3276820,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return d.writeUInt16BE(i,n),n+=2,void 0===(i=t.queue)&&(i=""),d[n]=u,n++,d.write(i,n,"utf8"),n+=u,void 0===(i=t.exchange)&&(i=void 0),d[n]=c,n++,d.write(i,n,"utf8"),n+=c,void 0===(i=t.routingKey)&&(i=""),d[n]=l,n++,d.write(i,n,"utf8"),n+=l,void 0===(i=t.nowait)&&(i=!1),i&&(o+=1),d[n]=o,n++,o=0,d[n+=f.copy(d,n)]=206,d.writeUInt32BE(n-7,3),d}(t,r);case 3276821:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3276821,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3276830:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276830,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.nowait)&&(n=!1),n&&(i+=1),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 3276831:return function(e,t){var r,n=0,i=Buffer.alloc(16);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3276831,7),n=11,void 0===(r=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof r||isNaN(r))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return i.writeUInt32BE(r,n),i[n+=4]=206,i.writeUInt32BE(n-7,3),i}(t,r);case 3276840:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3276840,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.ifUnused)&&(n=!1),n&&(i+=1),void 0===(n=t.ifEmpty)&&(n=!1),n&&(i+=2),void 0===(n=t.nowait)&&(n=!1),n&&(i+=4),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 3276841:return function(e,t){var r,n=0,i=Buffer.alloc(16);if(i[0]=1,i.writeUInt16BE(e,1),i.writeUInt32BE(3276841,7),n=11,void 0===(r=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof r||isNaN(r))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return i.writeUInt32BE(r,n),i[n+=4]=206,i.writeUInt32BE(n-7,3),i}(t,r);case 3276850:return function(e,t){var r,n=0,i=null,o=0,a=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(i,"utf8");if(o+=s,void 0===(i=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(o+=u,void 0===(i=t.routingKey))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(o+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,a);var l=H.slice(a,a+r);a+=r,o+=l.length;var f=Buffer.alloc(17+o);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3276850,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,void 0===(i=t.queue)&&(i=""),f[n]=s,n++,f.write(i,n,"utf8"),n+=s,void 0===(i=t.exchange)&&(i=void 0),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,void 0===(i=t.routingKey)&&(i=""),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,f[n+=l.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 3276851:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3276851,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932170:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(19);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932170,7),r=11,void 0===(n=t.prefetchSize))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchSize' is the wrong type; must be a number (but not NaN)");if(o.writeUInt32BE(n,r),r+=4,void 0===(n=t.prefetchCount))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'prefetchCount' is the wrong type; must be a number (but not NaN)");return o.writeUInt16BE(n,r),r+=2,void 0===(n=t.global)&&(n=!1),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 3932171:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3932171,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932180:return function(e,t){var r,n=0,i=null,o=0,a=0,s=0;if(void 0===(i=t.queue))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(i,"utf8");if(a+=u,void 0===(i=t.consumerTag))i="";else if(!("string"==typeof i&&Buffer.byteLength(i)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(i,"utf8");if(a+=c,void 0===(i=t.arguments))i={};else if("object"!=typeof i)throw new TypeError("Field 'arguments' is the wrong type; must be an object");r=Q(H,i,s);var l=H.slice(s,s+r);s+=r,a+=l.length;var f=Buffer.alloc(17+a);if(f[0]=1,f.writeUInt16BE(e,1),f.writeUInt32BE(3932180,7),n=11,void 0===(i=t.ticket))i=0;else if("number"!=typeof i||isNaN(i))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return f.writeUInt16BE(i,n),n+=2,void 0===(i=t.queue)&&(i=""),f[n]=u,n++,f.write(i,n,"utf8"),n+=u,void 0===(i=t.consumerTag)&&(i=""),f[n]=c,n++,f.write(i,n,"utf8"),n+=c,void 0===(i=t.noLocal)&&(i=!1),i&&(o+=1),void 0===(i=t.noAck)&&(i=!1),i&&(o+=2),void 0===(i=t.exclusive)&&(i=!1),i&&(o+=4),void 0===(i=t.nowait)&&(i=!1),i&&(o+=8),f[n]=o,n++,o=0,f[n+=l.copy(f,n)]=206,f.writeUInt32BE(n-7,3),f}(t,r);case 3932181:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932181,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932190:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(14+o);return s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3932190,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.nowait)&&(n=!1),n&&(i+=1),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 3932191:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932191,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932200:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(o+=a,void 0===(n=t.routingKey))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");o+=s;var u=Buffer.alloc(17+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932200,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.exchange)&&(n=""),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=""),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,void 0===(n=t.mandatory)&&(n=!1),n&&(i+=1),void 0===(n=t.immediate)&&(n=!1),n&&(i+=2),u[r]=i,u[++r]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3932210:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.replyText))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyText' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");if(i+=o,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(i+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");i+=s;var u=Buffer.alloc(17+i);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932210,7),r=11,void 0===(n=t.replyCode))throw new Error("Missing value for mandatory field 'replyCode'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'replyCode' is the wrong type; must be a number (but not NaN)");return u.writeUInt16BE(n,r),r+=2,void 0===(n=t.replyText)&&(n=""),u[r]=o,r++,u.write(n,r,"utf8"),r+=o,void 0===(n=t.exchange)&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=void 0),u[r]=s,r++,u.write(n,r,"utf8"),u[r+=s]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3932220:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.consumerTag))throw new Error("Missing value for mandatory field 'consumerTag'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'consumerTag' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(o+=a,void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");if(o+=s,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var u=Buffer.byteLength(n,"utf8");o+=u;var c=Buffer.alloc(24+o);if(c[0]=1,c.writeUInt16BE(e,1),c.writeUInt32BE(3932220,7),r=11,void 0===(n=t.consumerTag)&&(n=void 0),c[r]=a,r++,c.write(n,r,"utf8"),r+=a,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return P.writeUInt64BE(c,n,r),r+=8,void 0===(n=t.redelivered)&&(n=!1),n&&(i+=1),c[r]=i,r++,i=0,void 0===(n=t.exchange)&&(n=void 0),c[r]=s,r++,c.write(n,r,"utf8"),r+=s,void 0===(n=t.routingKey)&&(n=void 0),c[r]=u,r++,c.write(n,r,"utf8"),c[r+=u]=206,c.writeUInt32BE(r-7,3),c}(t,r);case 3932230:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.queue))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'queue' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");o+=a;var s=Buffer.alloc(16+o);if(s[0]=1,s.writeUInt16BE(e,1),s.writeUInt32BE(3932230,7),r=11,void 0===(n=t.ticket))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'ticket' is the wrong type; must be a number (but not NaN)");return s.writeUInt16BE(n,r),r+=2,void 0===(n=t.queue)&&(n=""),s[r]=a,r++,s.write(n,r,"utf8"),r+=a,void 0===(n=t.noAck)&&(n=!1),n&&(i+=1),s[r]=i,s[++r]=206,s.writeUInt32BE(r-7,3),s}(t,r);case 3932231:return function(e,t){var r=0,n=null,i=0,o=0;if(void 0===(n=t.exchange))throw new Error("Missing value for mandatory field 'exchange'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'exchange' is the wrong type; must be a string (up to 255 chars)");var a=Buffer.byteLength(n,"utf8");if(o+=a,void 0===(n=t.routingKey))throw new Error("Missing value for mandatory field 'routingKey'");if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'routingKey' is the wrong type; must be a string (up to 255 chars)");var s=Buffer.byteLength(n,"utf8");o+=s;var u=Buffer.alloc(27+o);if(u[0]=1,u.writeUInt16BE(e,1),u.writeUInt32BE(3932231,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");if(P.writeUInt64BE(u,n,r),r+=8,void 0===(n=t.redelivered)&&(n=!1),n&&(i+=1),u[r]=i,r++,i=0,void 0===(n=t.exchange)&&(n=void 0),u[r]=a,r++,u.write(n,r,"utf8"),r+=a,void 0===(n=t.routingKey)&&(n=void 0),u[r]=s,r++,u.write(n,r,"utf8"),r+=s,void 0===(n=t.messageCount))throw new Error("Missing value for mandatory field 'messageCount'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'messageCount' is the wrong type; must be a number (but not NaN)");return u.writeUInt32BE(n,r),u[r+=4]=206,u.writeUInt32BE(r-7,3),u}(t,r);case 3932232:return function(e,t){var r=0,n=null,i=0;if(void 0===(n=t.clusterId))n="";else if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var o=Buffer.byteLength(n,"utf8");i+=o;var a=Buffer.alloc(13+i);return a[0]=1,a.writeUInt16BE(e,1),a.writeUInt32BE(3932232,7),r=11,void 0===(n=t.clusterId)&&(n=""),a[r]=o,r++,a.write(n,r,"utf8"),a[r+=o]=206,a.writeUInt32BE(r-7,3),a}(t,r);case 3932240:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932240,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return P.writeUInt64BE(o,n,r),r+=8,void 0===(n=t.multiple)&&(n=!1),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 3932250:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932250,7),r=11,void 0===(n=t.deliveryTag))throw new Error("Missing value for mandatory field 'deliveryTag'");if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return P.writeUInt64BE(o,n,r),r+=8,void 0===(n=t.requeue)&&(n=!0),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 3932260:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932260,7),r=11,void 0===(n=t.requeue)&&(n=!1),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 3932270:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932270,7),r=11,void 0===(n=t.requeue)&&(n=!1),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 3932271:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(3932271,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 3932280:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(21);if(o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(3932280,7),r=11,void 0===(n=t.deliveryTag))n=0;else if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryTag' is the wrong type; must be a number (but not NaN)");return P.writeUInt64BE(o,n,r),r+=8,void 0===(n=t.multiple)&&(n=!1),n&&(i+=1),void 0===(n=t.requeue)&&(n=!0),n&&(i+=2),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 5898250:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898250,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898251:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898251,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898260:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898260,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898261:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898261,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898270:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898270,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5898271:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5898271,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);case 5570570:return function(e,t){var r=0,n=null,i=0,o=Buffer.alloc(13);return o[0]=1,o.writeUInt16BE(e,1),o.writeUInt32BE(5570570,7),r=11,void 0===(n=t.nowait)&&(n=!1),n&&(i+=1),o[r]=i,o[++r]=206,o.writeUInt32BE(r-7,3),o}(t,r);case 5570571:return function(e,t){var r=Buffer.alloc(12);return r[0]=1,r.writeUInt16BE(e,1),r.writeUInt32BE(5570571,7),r[11]=206,r.writeUInt32BE(4,3),r}(t);default:throw new Error("Unknown class/method ID")}},R.encodeProperties=function(e,t,r,n){if(60===e)return function(e,t,r){var n,i,o=0,a=0,s=0,u=0;if(null!=(n=r.contentType)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'contentType' is the wrong type; must be a string (up to 255 chars)");var c=Buffer.byteLength(n,"utf8");u+=1,u+=c}if(null!=(n=r.contentEncoding)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'contentEncoding' is the wrong type; must be a string (up to 255 chars)");var l=Buffer.byteLength(n,"utf8");u+=1,u+=l}if(null!=(n=r.headers)){if("object"!=typeof n)throw new TypeError("Field 'headers' is the wrong type; must be an object");i=Q(H,n,s);var f=H.slice(s,s+i);s+=i,u+=f.length}if(null!=(n=r.deliveryMode)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'deliveryMode' is the wrong type; must be a number (but not NaN)");u+=1}if(null!=(n=r.priority)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'priority' is the wrong type; must be a number (but not NaN)");u+=1}if(null!=(n=r.correlationId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'correlationId' is the wrong type; must be a string (up to 255 chars)");var d=Buffer.byteLength(n,"utf8");u+=1,u+=d}if(null!=(n=r.replyTo)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'replyTo' is the wrong type; must be a string (up to 255 chars)");var h=Buffer.byteLength(n,"utf8");u+=1,u+=h}if(null!=(n=r.expiration)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'expiration' is the wrong type; must be a string (up to 255 chars)");var p=Buffer.byteLength(n,"utf8");u+=1,u+=p}if(null!=(n=r.messageId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'messageId' is the wrong type; must be a string (up to 255 chars)");var g=Buffer.byteLength(n,"utf8");u+=1,u+=g}if(null!=(n=r.timestamp)){if("number"!=typeof n||isNaN(n))throw new TypeError("Field 'timestamp' is the wrong type; must be a number (but not NaN)");u+=8}if(null!=(n=r.type)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'type' is the wrong type; must be a string (up to 255 chars)");var m=Buffer.byteLength(n,"utf8");u+=1,u+=m}if(null!=(n=r.userId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'userId' is the wrong type; must be a string (up to 255 chars)");var v=Buffer.byteLength(n,"utf8");u+=1,u+=v}if(null!=(n=r.appId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'appId' is the wrong type; must be a string (up to 255 chars)");var w=Buffer.byteLength(n,"utf8");u+=1,u+=w}if(null!=(n=r.clusterId)){if(!("string"==typeof n&&Buffer.byteLength(n)<256))throw new TypeError("Field 'clusterId' is the wrong type; must be a string (up to 255 chars)");var y=Buffer.byteLength(n,"utf8");u+=1,u+=y}var b=Buffer.alloc(22+u);return b[0]=2,b.writeUInt16BE(e,1),b.writeUInt32BE(3932160,7),P.writeUInt64BE(b,t,11),a=0,o=21,null!=(n=r.contentType)&&(a+=32768,b[o]=c,o++,b.write(n,o,"utf8"),o+=c),null!=(n=r.contentEncoding)&&(a+=16384,b[o]=l,o++,b.write(n,o,"utf8"),o+=l),null!=(n=r.headers)&&(a+=8192,o+=f.copy(b,o)),null!=(n=r.deliveryMode)&&(a+=4096,b.writeUInt8(n,o),o++),null!=(n=r.priority)&&(a+=2048,b.writeUInt8(n,o),o++),null!=(n=r.correlationId)&&(a+=1024,b[o]=d,o++,b.write(n,o,"utf8"),o+=d),null!=(n=r.replyTo)&&(a+=512,b[o]=h,o++,b.write(n,o,"utf8"),o+=h),null!=(n=r.expiration)&&(a+=256,b[o]=p,o++,b.write(n,o,"utf8"),o+=p),null!=(n=r.messageId)&&(a+=128,b[o]=g,o++,b.write(n,o,"utf8"),o+=g),null!=(n=r.timestamp)&&(a+=64,P.writeUInt64BE(b,n,o),o+=8),null!=(n=r.type)&&(a+=32,b[o]=m,o++,b.write(n,o,"utf8"),o+=m),null!=(n=r.userId)&&(a+=16,b[o]=v,o++,b.write(n,o,"utf8"),o+=v),null!=(n=r.appId)&&(a+=8,b[o]=w,o++,b.write(n,o,"utf8"),o+=w),null!=(n=r.clusterId)&&(a+=4,b[o]=y,o++,b.write(n,o,"utf8"),o+=y),b[o]=206,b.writeUInt32BE(o-7,3),b.writeUInt16BE(a,19),b.slice(0,o+1)}(t,r,n);throw new Error("Unknown class/properties ID")},R.info=function(e){switch(e){case 655370:return W;case 655371:return $;case 655380:return G;case 655381:return Y;case 655390:return Z;case 655391:return J;case 655400:return V;case 655401:return X;case 655410:return ee;case 655411:return te;case 655420:return re;case 655421:return ne;case 1310730:return ie;case 1310731:return oe;case 1310740:return ae;case 1310741:return se;case 1310760:return ue;case 1310761:return ce;case 1966090:return le;case 1966091:return fe;case 2621450:return de;case 2621451:return he;case 2621460:return pe;case 2621461:return ge;case 2621470:return me;case 2621471:return ve;case 2621480:return we;case 2621491:return ye;case 3276810:return be;case 3276811:return Ee;case 3276820:return Ie;case 3276821:return Be;case 3276830:return Ue;case 3276831:return Ce;case 3276840:return ke;case 3276841:return xe;case 3276850:return Te;case 3276851:return Oe;case 3932170:return Se;case 3932171:return Ne;case 3932180:return Le;case 3932181:return Fe;case 3932190:return Me;case 3932191:return Re;case 3932200:return _e;case 3932210:return Ae;case 3932220:return De;case 3932230:return qe;case 3932231:return je;case 3932232:return ze;case 3932240:return Pe;case 3932250:return Qe;case 3932260:return Ke;case 3932270:return He;case 3932271:return We;case 3932280:return $e;case 5898250:return Ge;case 5898251:return Ye;case 5898260:return Ze;case 5898261:return Je;case 5898270:return Ve;case 5898271:return Xe;case 5570570:return et;case 5570571:return tt;case 60:return rt;default:throw new Error("Unknown class/method ID")}},R.ConnectionStart=655370;var W=R.methodInfoConnectionStart={id:655370,classId:10,methodId:10,name:"ConnectionStart",args:[{type:"octet",name:"versionMajor",default:0},{type:"octet",name:"versionMinor",default:9},{type:"table",name:"serverProperties"},{type:"longstr",name:"mechanisms",default:"PLAIN"},{type:"longstr",name:"locales",default:"en_US"}]};R.ConnectionStartOk=655371;var $=R.methodInfoConnectionStartOk={id:655371,classId:10,methodId:11,name:"ConnectionStartOk",args:[{type:"table",name:"clientProperties"},{type:"shortstr",name:"mechanism",default:"PLAIN"},{type:"longstr",name:"response"},{type:"shortstr",name:"locale",default:"en_US"}]};R.ConnectionSecure=655380;var G=R.methodInfoConnectionSecure={id:655380,classId:10,methodId:20,name:"ConnectionSecure",args:[{type:"longstr",name:"challenge"}]};R.ConnectionSecureOk=655381;var Y=R.methodInfoConnectionSecureOk={id:655381,classId:10,methodId:21,name:"ConnectionSecureOk",args:[{type:"longstr",name:"response"}]};R.ConnectionTune=655390;var Z=R.methodInfoConnectionTune={id:655390,classId:10,methodId:30,name:"ConnectionTune",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};R.ConnectionTuneOk=655391;var J=R.methodInfoConnectionTuneOk={id:655391,classId:10,methodId:31,name:"ConnectionTuneOk",args:[{type:"short",name:"channelMax",default:0},{type:"long",name:"frameMax",default:0},{type:"short",name:"heartbeat",default:0}]};R.ConnectionOpen=655400;var V=R.methodInfoConnectionOpen={id:655400,classId:10,methodId:40,name:"ConnectionOpen",args:[{type:"shortstr",name:"virtualHost",default:"/"},{type:"shortstr",name:"capabilities",default:""},{type:"bit",name:"insist",default:!1}]};R.ConnectionOpenOk=655401;var X=R.methodInfoConnectionOpenOk={id:655401,classId:10,methodId:41,name:"ConnectionOpenOk",args:[{type:"shortstr",name:"knownHosts",default:""}]};R.ConnectionClose=655410;var ee=R.methodInfoConnectionClose={id:655410,classId:10,methodId:50,name:"ConnectionClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};R.ConnectionCloseOk=655411;var te=R.methodInfoConnectionCloseOk={id:655411,classId:10,methodId:51,name:"ConnectionCloseOk",args:[]};R.ConnectionBlocked=655420;var re=R.methodInfoConnectionBlocked={id:655420,classId:10,methodId:60,name:"ConnectionBlocked",args:[{type:"shortstr",name:"reason",default:""}]};R.ConnectionUnblocked=655421;var ne=R.methodInfoConnectionUnblocked={id:655421,classId:10,methodId:61,name:"ConnectionUnblocked",args:[]};R.ChannelOpen=1310730;var ie=R.methodInfoChannelOpen={id:1310730,classId:20,methodId:10,name:"ChannelOpen",args:[{type:"shortstr",name:"outOfBand",default:""}]};R.ChannelOpenOk=1310731;var oe=R.methodInfoChannelOpenOk={id:1310731,classId:20,methodId:11,name:"ChannelOpenOk",args:[{type:"longstr",name:"channelId",default:""}]};R.ChannelFlow=1310740;var ae=R.methodInfoChannelFlow={id:1310740,classId:20,methodId:20,name:"ChannelFlow",args:[{type:"bit",name:"active"}]};R.ChannelFlowOk=1310741;var se=R.methodInfoChannelFlowOk={id:1310741,classId:20,methodId:21,name:"ChannelFlowOk",args:[{type:"bit",name:"active"}]};R.ChannelClose=1310760;var ue=R.methodInfoChannelClose={id:1310760,classId:20,methodId:40,name:"ChannelClose",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"short",name:"classId"},{type:"short",name:"methodId"}]};R.ChannelCloseOk=1310761;var ce=R.methodInfoChannelCloseOk={id:1310761,classId:20,methodId:41,name:"ChannelCloseOk",args:[]};R.AccessRequest=1966090;var le=R.methodInfoAccessRequest={id:1966090,classId:30,methodId:10,name:"AccessRequest",args:[{type:"shortstr",name:"realm",default:"/data"},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"passive",default:!0},{type:"bit",name:"active",default:!0},{type:"bit",name:"write",default:!0},{type:"bit",name:"read",default:!0}]};R.AccessRequestOk=1966091;var fe=R.methodInfoAccessRequestOk={id:1966091,classId:30,methodId:11,name:"AccessRequestOk",args:[{type:"short",name:"ticket",default:1}]};R.ExchangeDeclare=2621450;var de=R.methodInfoExchangeDeclare={id:2621450,classId:40,methodId:10,name:"ExchangeDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"type",default:"direct"},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"internal",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.ExchangeDeclareOk=2621451;var he=R.methodInfoExchangeDeclareOk={id:2621451,classId:40,methodId:11,name:"ExchangeDeclareOk",args:[]};R.ExchangeDelete=2621460;var pe=R.methodInfoExchangeDelete={id:2621460,classId:40,methodId:20,name:"ExchangeDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange"},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"nowait",default:!1}]};R.ExchangeDeleteOk=2621461;var ge=R.methodInfoExchangeDeleteOk={id:2621461,classId:40,methodId:21,name:"ExchangeDeleteOk",args:[]};R.ExchangeBind=2621470;var me=R.methodInfoExchangeBind={id:2621470,classId:40,methodId:30,name:"ExchangeBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.ExchangeBindOk=2621471;var ve=R.methodInfoExchangeBindOk={id:2621471,classId:40,methodId:31,name:"ExchangeBindOk",args:[]};R.ExchangeUnbind=2621480;var we=R.methodInfoExchangeUnbind={id:2621480,classId:40,methodId:40,name:"ExchangeUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"destination"},{type:"shortstr",name:"source"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.ExchangeUnbindOk=2621491;var ye=R.methodInfoExchangeUnbindOk={id:2621491,classId:40,methodId:51,name:"ExchangeUnbindOk",args:[]};R.QueueDeclare=3276810;var be=R.methodInfoQueueDeclare={id:3276810,classId:50,methodId:10,name:"QueueDeclare",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"passive",default:!1},{type:"bit",name:"durable",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"autoDelete",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.QueueDeclareOk=3276811;var Ee=R.methodInfoQueueDeclareOk={id:3276811,classId:50,methodId:11,name:"QueueDeclareOk",args:[{type:"shortstr",name:"queue"},{type:"long",name:"messageCount"},{type:"long",name:"consumerCount"}]};R.QueueBind=3276820;var Ie=R.methodInfoQueueBind={id:3276820,classId:50,methodId:20,name:"QueueBind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.QueueBindOk=3276821;var Be=R.methodInfoQueueBindOk={id:3276821,classId:50,methodId:21,name:"QueueBindOk",args:[]};R.QueuePurge=3276830;var Ue=R.methodInfoQueuePurge={id:3276830,classId:50,methodId:30,name:"QueuePurge",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"nowait",default:!1}]};R.QueuePurgeOk=3276831;var Ce=R.methodInfoQueuePurgeOk={id:3276831,classId:50,methodId:31,name:"QueuePurgeOk",args:[{type:"long",name:"messageCount"}]};R.QueueDelete=3276840;var ke=R.methodInfoQueueDelete={id:3276840,classId:50,methodId:40,name:"QueueDelete",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"ifUnused",default:!1},{type:"bit",name:"ifEmpty",default:!1},{type:"bit",name:"nowait",default:!1}]};R.QueueDeleteOk=3276841;var xe=R.methodInfoQueueDeleteOk={id:3276841,classId:50,methodId:41,name:"QueueDeleteOk",args:[{type:"long",name:"messageCount"}]};R.QueueUnbind=3276850;var Te=R.methodInfoQueueUnbind={id:3276850,classId:50,methodId:50,name:"QueueUnbind",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey",default:""},{type:"table",name:"arguments",default:{}}]};R.QueueUnbindOk=3276851;var Oe=R.methodInfoQueueUnbindOk={id:3276851,classId:50,methodId:51,name:"QueueUnbindOk",args:[]};R.BasicQos=3932170;var Se=R.methodInfoBasicQos={id:3932170,classId:60,methodId:10,name:"BasicQos",args:[{type:"long",name:"prefetchSize",default:0},{type:"short",name:"prefetchCount",default:0},{type:"bit",name:"global",default:!1}]};R.BasicQosOk=3932171;var Ne=R.methodInfoBasicQosOk={id:3932171,classId:60,methodId:11,name:"BasicQosOk",args:[]};R.BasicConsume=3932180;var Le=R.methodInfoBasicConsume={id:3932180,classId:60,methodId:20,name:"BasicConsume",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"shortstr",name:"consumerTag",default:""},{type:"bit",name:"noLocal",default:!1},{type:"bit",name:"noAck",default:!1},{type:"bit",name:"exclusive",default:!1},{type:"bit",name:"nowait",default:!1},{type:"table",name:"arguments",default:{}}]};R.BasicConsumeOk=3932181;var Fe=R.methodInfoBasicConsumeOk={id:3932181,classId:60,methodId:21,name:"BasicConsumeOk",args:[{type:"shortstr",name:"consumerTag"}]};R.BasicCancel=3932190;var Me=R.methodInfoBasicCancel={id:3932190,classId:60,methodId:30,name:"BasicCancel",args:[{type:"shortstr",name:"consumerTag"},{type:"bit",name:"nowait",default:!1}]};R.BasicCancelOk=3932191;var Re=R.methodInfoBasicCancelOk={id:3932191,classId:60,methodId:31,name:"BasicCancelOk",args:[{type:"shortstr",name:"consumerTag"}]};R.BasicPublish=3932200;var _e=R.methodInfoBasicPublish={id:3932200,classId:60,methodId:40,name:"BasicPublish",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"exchange",default:""},{type:"shortstr",name:"routingKey",default:""},{type:"bit",name:"mandatory",default:!1},{type:"bit",name:"immediate",default:!1}]};R.BasicReturn=3932210;var Ae=R.methodInfoBasicReturn={id:3932210,classId:60,methodId:50,name:"BasicReturn",args:[{type:"short",name:"replyCode"},{type:"shortstr",name:"replyText",default:""},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};R.BasicDeliver=3932220;var De=R.methodInfoBasicDeliver={id:3932220,classId:60,methodId:60,name:"BasicDeliver",args:[{type:"shortstr",name:"consumerTag"},{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"}]};R.BasicGet=3932230;var qe=R.methodInfoBasicGet={id:3932230,classId:60,methodId:70,name:"BasicGet",args:[{type:"short",name:"ticket",default:0},{type:"shortstr",name:"queue",default:""},{type:"bit",name:"noAck",default:!1}]};R.BasicGetOk=3932231;var je=R.methodInfoBasicGetOk={id:3932231,classId:60,methodId:71,name:"BasicGetOk",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"redelivered",default:!1},{type:"shortstr",name:"exchange"},{type:"shortstr",name:"routingKey"},{type:"long",name:"messageCount"}]};R.BasicGetEmpty=3932232;var ze=R.methodInfoBasicGetEmpty={id:3932232,classId:60,methodId:72,name:"BasicGetEmpty",args:[{type:"shortstr",name:"clusterId",default:""}]};R.BasicAck=3932240;var Pe=R.methodInfoBasicAck={id:3932240,classId:60,methodId:80,name:"BasicAck",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1}]};R.BasicReject=3932250;var Qe=R.methodInfoBasicReject={id:3932250,classId:60,methodId:90,name:"BasicReject",args:[{type:"longlong",name:"deliveryTag"},{type:"bit",name:"requeue",default:!0}]};R.BasicRecoverAsync=3932260;var Ke=R.methodInfoBasicRecoverAsync={id:3932260,classId:60,methodId:100,name:"BasicRecoverAsync",args:[{type:"bit",name:"requeue",default:!1}]};R.BasicRecover=3932270;var He=R.methodInfoBasicRecover={id:3932270,classId:60,methodId:110,name:"BasicRecover",args:[{type:"bit",name:"requeue",default:!1}]};R.BasicRecoverOk=3932271;var We=R.methodInfoBasicRecoverOk={id:3932271,classId:60,methodId:111,name:"BasicRecoverOk",args:[]};R.BasicNack=3932280;var $e=R.methodInfoBasicNack={id:3932280,classId:60,methodId:120,name:"BasicNack",args:[{type:"longlong",name:"deliveryTag",default:0},{type:"bit",name:"multiple",default:!1},{type:"bit",name:"requeue",default:!0}]};R.TxSelect=5898250;var Ge=R.methodInfoTxSelect={id:5898250,classId:90,methodId:10,name:"TxSelect",args:[]};R.TxSelectOk=5898251;var Ye=R.methodInfoTxSelectOk={id:5898251,classId:90,methodId:11,name:"TxSelectOk",args:[]};R.TxCommit=5898260;var Ze=R.methodInfoTxCommit={id:5898260,classId:90,methodId:20,name:"TxCommit",args:[]};R.TxCommitOk=5898261;var Je=R.methodInfoTxCommitOk={id:5898261,classId:90,methodId:21,name:"TxCommitOk",args:[]};R.TxRollback=5898270;var Ve=R.methodInfoTxRollback={id:5898270,classId:90,methodId:30,name:"TxRollback",args:[]};R.TxRollbackOk=5898271;var Xe=R.methodInfoTxRollbackOk={id:5898271,classId:90,methodId:31,name:"TxRollbackOk",args:[]};R.ConfirmSelect=5570570;var et=R.methodInfoConfirmSelect={id:5570570,classId:85,methodId:10,name:"ConfirmSelect",args:[{type:"bit",name:"nowait",default:!1}]};R.ConfirmSelectOk=5570571;var tt=R.methodInfoConfirmSelectOk={id:5570571,classId:85,methodId:11,name:"ConfirmSelectOk",args:[]};R.BasicProperties=60;var rt=R.propertiesInfoBasicProperties={id:60,name:"BasicProperties",args:[{type:"shortstr",name:"contentType"},{type:"shortstr",name:"contentEncoding"},{type:"table",name:"headers"},{type:"octet",name:"deliveryMode"},{type:"octet",name:"priority"},{type:"shortstr",name:"correlationId"},{type:"shortstr",name:"replyTo"},{type:"shortstr",name:"expiration"},{type:"shortstr",name:"messageId"},{type:"timestamp",name:"timestamp"},{type:"shortstr",name:"type"},{type:"shortstr",name:"userId"},{type:"shortstr",name:"appId"},{type:"shortstr",name:"clusterId"}]},nt={},it={},ot={},at={};function st(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[e[r]]=1);return t}function ut(e,t,r){var n=st(r),i={name:e};return i.type=lt(n),ft(i,i.type,n),i.size=dt(i,i.type,t,i.unit),i}at.variable=ut,at.rest=function(){return ut("_",!0,["binary"])},at.value=function(e,t,r){var n=st(r),i={value:e};return i.type=lt(n),ft(i,i.type,n),i.size=dt(i,i.type,t,i.unit),i},at.string=function(e){return{value:e,type:"string"}};var ct={integer:1,binary:1,float:1};function lt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&ct[t])return t;return"integer"}function ft(e,t,r){switch(t){case"integer":e.signed=function(e){return e.signed}(r);case"float":e.bigendian=function(e){return!e.little}(r);default:e.unit=function(e,t){for(var r in e){if(Object.prototype.hasOwnProperty.call(e,r))if("unit:"==r.substr(0,5))return parseInt(r.substr(5))}switch(t){case"binary":return 8;case"integer":case"float":return 1}}(r,e.type)}return e}function dt(e,t,r,n){if(void 0!==r&&""!==r)return r;switch(t){case"integer":return 8;case"float":return 64;case"binary":return!0}}var ht=function(){function e(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E-\x1F\x80-\uFFFF]/g,escape)+'"'}var t={parse:function(t,r){var n={start:function(){var e,t,r,n,o,a;if(o=i,a=i,null!==(e=E()))if(null!==(t=c())){for(r=[],n=u();null!==n;)r.push(n),n=u();null!==r?e=[e,t,r]:(e=null,i=a)}else e=null,i=a;else e=null,i=a;null!==e&&(s=e[1],(l=e[2]).unshift(s),e=l);var s,l;null===e&&(i=o);return e},segmentTail:u,segment:c,string:l,chars:f,char:d,hexDigit:h,identifier:p,number:g,size:m,specifierList:v,specifierTail:w,specifier:y,unit:b,ws:E};if(void 0!==r){if(void 0===n[r])throw new Error("Invalid rule name: "+e(r)+".")}else r="start";var i=0,o=0,a=[];function s(e){i<o||(i>o&&(o=i,a=[]),a.push(e))}function u(){var e,r,n,o,a,u;return a=i,u=i,null!==(e=E())?(44===t.charCodeAt(i)?(r=",",i++):(r=null,s('","')),null!==r&&null!==(n=E())&&null!==(o=c())?e=[e,r,n,o]:(e=null,i=u)):(e=null,i=u),null!==e&&(e=e[3]),null===e&&(i=a),e}function c(){var e,t,r,n,o;return n=i,null!==(e=l())&&(e={string:e}),null===e&&(i=n),null===e&&(n=i,o=i,null!==(e=p())&&null!==(t=null!==(t=m())?t:"")&&null!==(r=null!==(r=v())?r:"")?e=[e,t,r]:(e=null,i=o),null!==e&&(e=function(e,t,r,n){return{name:t,size:r,specifiers:n}}(0,e[0],e[1],e[2])),null===e&&(i=n),null===e&&(n=i,o=i,null!==(e=g())&&null!==(t=null!==(t=m())?t:"")&&null!==(r=null!==(r=v())?r:"")?e=[e,t,r]:(e=null,i=o),null!==e&&(e=function(e,t,r,n){return{value:t,size:r,specifiers:n}}(0,e[0],e[1],e[2])),null===e&&(i=n))),e}function l(){var e,r,n,o,a;return o=i,a=i,34===t.charCodeAt(i)?(e='"',i++):(e=null,s('"\\""')),null!==e?(34===t.charCodeAt(i)?(r='"',i++):(r=null,s('"\\""')),null!==r?e=[e,r]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=""),null===e&&(i=o),null===e&&(o=i,a=i,34===t.charCodeAt(i)?(e='"',i++):(e=null,s('"\\""')),null!==e&&null!==(r=f())?(34===t.charCodeAt(i)?(n='"',i++):(n=null,s('"\\""')),null!==n?e=[e,r,n]:(e=null,i=a)):(e=null,i=a),null!==e&&(e=e[1]),null===e&&(i=o)),e}function f(){var e,t,r;if(r=i,null!==(t=d()))for(e=[];null!==t;)e.push(t),t=d();else e=null;return null!==e&&(e=e.join("")),null===e&&(i=r),e}function d(){var e,r,n,o,a,u,c,l,f,d,p;return/^[^"\\\0-\x1F]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,s('[^"\\\\\\0-\\x1F]')),null===e&&(u=i,'\\"'===t.substr(i,2)?(e='\\"',i+=2):(e=null,s('"\\\\\\""')),null!==e&&(e='"'),null===e&&(i=u),null===e&&(u=i,"\\\\"===t.substr(i,2)?(e="\\\\",i+=2):(e=null,s('"\\\\\\\\"')),null!==e&&(e="\\"),null===e&&(i=u),null===e&&(u=i,"\\/"===t.substr(i,2)?(e="\\/",i+=2):(e=null,s('"\\\\/"')),null!==e&&(e="/"),null===e&&(i=u),null===e&&(u=i,"\\b"===t.substr(i,2)?(e="\\b",i+=2):(e=null,s('"\\\\b"')),null!==e&&(e="\b"),null===e&&(i=u),null===e&&(u=i,"\\f"===t.substr(i,2)?(e="\\f",i+=2):(e=null,s('"\\\\f"')),null!==e&&(e="\f"),null===e&&(i=u),null===e&&(u=i,"\\n"===t.substr(i,2)?(e="\\n",i+=2):(e=null,s('"\\\\n"')),null!==e&&(e="\n"),null===e&&(i=u),null===e&&(u=i,"\\r"===t.substr(i,2)?(e="\\r",i+=2):(e=null,s('"\\\\r"')),null!==e&&(e="\r"),null===e&&(i=u),null===e&&(u=i,"\\t"===t.substr(i,2)?(e="\\t",i+=2):(e=null,s('"\\\\t"')),null!==e&&(e="\t"),null===e&&(i=u),null===e&&(u=i,c=i,"\\u"===t.substr(i,2)?(e="\\u",i+=2):(e=null,s('"\\\\u"')),null!==e&&null!==(r=h())&&null!==(n=h())&&null!==(o=h())&&null!==(a=h())?e=[e,r,n,o,a]:(e=null,i=c),null!==e&&(l=e[1],f=e[2],d=e[3],p=e[4],e=String.fromCharCode(parseInt("0x"+l+f+d+p))),null===e&&(i=u)))))))))),e}function h(){var e;return/^[0-9a-fA-F]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,s("[0-9a-fA-F]")),e}function p(){var e,r,n,o,a,u,c;if(o=i,a=i,/^[_a-zA-Z]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,s("[_a-zA-Z]")),null!==e){for(r=[],/^[_a-zA-Z0-9]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,s("[_a-zA-Z0-9]"));null!==n;)r.push(n),/^[_a-zA-Z0-9]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,s("[_a-zA-Z0-9]"));null!==r?e=[e,r]:(e=null,i=a)}else e=null,i=a;return null!==e&&(u=e[0],c=e[1],e=u+c.join("")),null===e&&(i=o),e}function g(){var e,r,n,o,a,u,c;if(o=i,48===t.charCodeAt(i)?(e="0",i++):(e=null,s('"0"')),null!==e&&(e=0),null===e&&(i=o),null===e){if(o=i,a=i,/^[1-9]/.test(t.charAt(i))?(e=t.charAt(i),i++):(e=null,s("[1-9]")),null!==e){for(r=[],/^[0-9]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,s("[0-9]"));null!==n;)r.push(n),/^[0-9]/.test(t.charAt(i))?(n=t.charAt(i),i++):(n=null,s("[0-9]"));null!==r?e=[e,r]:(e=null,i=a)}else e=null,i=a;null!==e&&(u=e[0],c=e[1],e=parseInt(u+c.join(""))),null===e&&(i=o)}return e}function m(){var e,r,n,o;return n=i,o=i,58===t.charCodeAt(i)?(e=":",i++):(e=null,s('":"')),null!==e&&null!==(r=g())?e=[e,r]:(e=null,i=o),null!==e&&(e=e[1]),null===e&&(i=n),null===e&&(n=i,o=i,58===t.charCodeAt(i)?(e=":",i++):(e=null,s('":"')),null!==e&&null!==(r=p())?e=[e,r]:(e=null,i=o),null!==e&&(e=e[1]),null===e&&(i=n)),e}function v(){var e,r,n,o,a,u,c,l;if(a=i,u=i,47===t.charCodeAt(i)?(e="/",i++):(e=null,s('"/"')),null!==e)if(null!==(r=y())){for(n=[],o=w();null!==o;)n.push(o),o=w();null!==n?e=[e,r,n]:(e=null,i=u)}else e=null,i=u;else e=null,i=u;return null!==e&&(c=e[1],(l=e[2]).unshift(c),e=l),null===e&&(i=a),e}function w(){var e,r,n,o;return n=i,o=i,45===t.charCodeAt(i)?(e="-",i++):(e=null,s('"-"')),null!==e&&null!==(r=y())?e=[e,r]:(e=null,i=o),null!==e&&(e=e[1]),null===e&&(i=n),e}function y(){var e;return"little"===t.substr(i,6)?(e="little",i+=6):(e=null,s('"little"')),null===e&&("big"===t.substr(i,3)?(e="big",i+=3):(e=null,s('"big"')),null===e&&("signed"===t.substr(i,6)?(e="signed",i+=6):(e=null,s('"signed"')),null===e&&("unsigned"===t.substr(i,8)?(e="unsigned",i+=8):(e=null,s('"unsigned"')),null===e&&("integer"===t.substr(i,7)?(e="integer",i+=7):(e=null,s('"integer"')),null===e&&("binary"===t.substr(i,6)?(e="binary",i+=6):(e=null,s('"binary"')),null===e&&("float"===t.substr(i,5)?(e="float",i+=5):(e=null,s('"float"')),null===e&&(e=b()))))))),e}function b(){var e,r,n,o;return n=i,o=i,"unit:"===t.substr(i,5)?(e="unit:",i+=5):(e=null,s('"unit:"')),null!==e&&null!==(r=g())?e=[e,r]:(e=null,i=o),null!==e&&(e="unit:"+e[1]),null===e&&(i=n),e}function E(){var e,r;for(e=[],/^[ \t\n]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s("[ \\t\\n]"));null!==r;)e.push(r),/^[ \t\n]/.test(t.charAt(i))?(r=t.charAt(i),i++):(r=null,s("[ \\t\\n]"));return e}var I=n[r]();if(null===I||i!==t.length){var B=Math.max(i,o),U=B<t.length?t.charAt(B):null,C=function(){for(var e=1,r=1,n=!1,a=0;a<Math.max(i,o);a++){var s=t.charAt(a);"\n"===s?(n||e++,r=1,n=!1):"\r"===s||"\u2028"===s||"\u2029"===s?(e++,r=1,n=!0):(r++,n=!1)}return{line:e,column:r}}();throw new this.SyntaxError(function(e){e.sort();for(var t=null,r=[],n=0;n<e.length;n++)e[n]!==t&&(r.push(e[n]),t=e[n]);return r}(a),U,B,C.line,C.column)}return I},toSource:function(){return this._source},SyntaxError:function(t,r,n,i,o){this.name="SyntaxError",this.expected=t,this.found=r,this.message=function(t,r){var n;switch(t.length){case 0:n="end of input";break;case 1:n=t[0];break;default:n=t.slice(0,t.length-1).join(", ")+" or "+t[t.length-1]}return"Expected "+n+" but "+(r?e(r):"end of input")+" found."}(t,r),this.offset=n,this.line=i,this.column=o}};return t.SyntaxError.prototype=Error.prototype,t}(),pt=at,gt=ht;ot.parse=function(){return function(e){for(var t=gt.parse(e),r=0,n=t.length;r<n;r++){var i=t[r];if(null!=i.string)t[r]=pt.string(i.string);else if(null!=i.value)t[r]=pt.value(i.value,i.size,i.specifiers);else{if(null==i.name)throw"Unknown segment "+i;t[r]=pt.variable(i.name,i.size,i.specifiers)}}return t}([].join.call(arguments,","))};var mt,vt,wt,yt,bt,Et={},It={},Bt={},Ut={get exports(){return Bt},set exports(e){Bt=e}};function Ct(){if(vt)return mt;vt=1;var e=1e3,t=60*e,r=60*t,n=24*r,i=7*n,o=365.25*n;function a(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}return mt=function(s,u){u=u||{};var c=typeof s;if("string"===c&&s.length>0)return function(a){if((a=String(a)).length>100)return;var s=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(!s)return;var u=parseFloat(s[1]);switch((s[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return u*o;case"weeks":case"week":case"w":return u*i;case"days":case"day":case"d":return u*n;case"hours":case"hour":case"hrs":case"hr":case"h":return u*r;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}(s);if("number"===c&&isFinite(s))return u.long?function(i){var o=Math.abs(i);if(o>=n)return a(i,o,n,"day");if(o>=r)return a(i,o,r,"hour");if(o>=t)return a(i,o,t,"minute");if(o>=e)return a(i,o,e,"second");return i+" ms"}(s):function(i){var o=Math.abs(i);if(o>=n)return Math.round(i/n)+"d";if(o>=r)return Math.round(i/r)+"h";if(o>=t)return Math.round(i/t)+"m";if(o>=e)return Math.round(i/e)+"s";return i+"ms"}(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))},mt}function kt(){if(yt)return wt;return yt=1,wt=function(e){function t(e){let n,i,o,a=null;function s(...e){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(n||i);r.diff=o,r.prev=n,r.curr=i,n=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((n,i)=>{if("%%"===n)return"%";a++;const o=t.formatters[i];if("function"==typeof o){const t=e[a];n=o.call(r,t),e.splice(a,1),a--}return n})),t.formatArgs.call(r,e);(r.log||t.log).apply(r,e)}return s.namespace=e,s.useColors=t.useColors(),s.color=t.selectColor(e),s.extend=r,s.destroy=t.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,o=t.enabled(e)),o),set:e=>{a=e}}),"function"==typeof t.init&&t.init(s),s}function r(e,r){const n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(n),...t.skips.map(n).map((e=>"-"+e))].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.slice(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=Ct(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((r=>{t[r]=e[r]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let t=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t},wt}var xt,Tt,Ot,St,Nt,Lt={},Ft={get exports(){return Lt},set exports(e){Lt=e}};function Mt(){return Tt?xt:(Tt=1,xt=(e,t=process.argv)=>{const r=e.startsWith("-")?"":1===e.length?"-":"--",n=t.indexOf(r+e),i=t.indexOf("--");return-1!==n&&(-1===i||n<i)})}function Rt(){return Nt||(Nt=1,function(e,i){const o=t,a=r;i.init=function(e){e.inspectOpts={};const t=Object.keys(i.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=i.inspectOpts[t[r]]},i.log=function(...e){return process.stderr.write(a.format(...e)+"\n")},i.formatArgs=function(t){const{namespace:r,useColors:n}=this;if(n){const n=this.color,i="[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${r} [0m`;t[0]=o+t[0].split("\n").join("\n"+o),t.push(i+"m+"+e.exports.humanize(this.diff)+"[0m")}else t[0]=function(){if(i.inspectOpts.hideDate)return"";return(new Date).toISOString()+" "}()+r+" "+t[0]},i.save=function(e){e?process.env.DEBUG=e:delete process.env.DEBUG},i.load=function(){return process.env.DEBUG},i.useColors=function(){return"colors"in i.inspectOpts?Boolean(i.inspectOpts.colors):o.isatty(process.stderr.fd)},i.destroy=a.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),i.colors=[6,2,3,4,5,1];try{const e=function(){if(St)return Ot;St=1;const e=n,r=t,i=Mt(),{env:o}=process;let a;function s(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function u(t,r){if(0===a)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(t&&!r&&void 0===a)return 0;const n=a||0;if("dumb"===o.TERM)return n;if("win32"===process.platform){const t=e.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||"codeship"===o.CI_NAME?1:n;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)||"COLORTERM"in o?1:n}return i("no-color")||i("no-colors")||i("color=false")||i("color=never")?a=0:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=1),"FORCE_COLOR"in o&&(a="true"===o.FORCE_COLOR?1:"false"===o.FORCE_COLOR?0:0===o.FORCE_COLOR.length?1:Math.min(parseInt(o.FORCE_COLOR,10),3)),Ot={supportsColor:function(e){return s(u(e,e&&e.isTTY))},stdout:s(u(!0,r.isatty(1))),stderr:s(u(!0,r.isatty(2)))},Ot}();e&&(e.stderr||e).level>=2&&(i.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(e){}i.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const r=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let n=process.env[t];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),e[r]=n,e}),{}),e.exports=kt()(i);const{formatters:s}=e.exports;s.o=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")},s.O=function(e){return this.inspectOpts.colors=this.useColors,a.inspect(e,this.inspectOpts)}}(Ft,Lt)),Lt}!function(e){"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?e.exports=(bt||(bt=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=kt()(t);const{formatters:r}=e.exports;r.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(Ut,Bt)),Bt):e.exports=Rt()}({get exports(){return It},set exports(e){It=e}});var _t=A,At=It("bitsyntax-Interpreter");function Dt(e,t,r,n,i){switch(r){case 1:return i?e.readInt8(t):e.readUInt8(t);case 2:return n?i?e.readInt16BE(t):e.readUInt16BE(t):i?e.readInt16LE(t):e.readUInt16LE(t);case 4:return n?i?e.readInt32BE(t):e.readUInt32BE(t):i?e.readInt32LE(t):e.readUInt32LE(t);case 8:return n?(i?_t.readInt64BE:_t.readUInt64BE)(e,t):(i?_t.readInt64LE:_t.readUInt64LE)(e,t);default:throw"Integers must be 8-, 16-, 32- or 64-bit"}}function qt(e,t,r,n){switch(r){case 4:return n?e.readFloatBE(t):e.readFloatLE(t);case 8:return n?e.readDoubleBE(t):e.readDoubleLE(t);default:throw"Floats must be 32- or 64-bit"}}function jt(e,t){var r=e.size;return"string"==typeof r?t[r]:r}Et.match=function(e,t,r){var n=0,i=function(e){function t(){}return t.prototype=e,new t}(r),o=8*t.length;function a(e){At("skip bits"),At(e);var t=jt(e,i);if(!0===t)return n%8==0&&(n=o,!0);var r=e.unit*t;if(n+r>o)return!1;n+=r}function s(e){At("get_integer"),At(e);var r=e.unit,a=jt(e,i)*r,s=n/8;return n+=a,!(a%8>0||n>o)&&Dt(t,s,a/8,e.bigendian,e.signed)}function u(e){At("get_float"),At(e);var r=e.unit,a=jt(e,i)*r,s=n/8;return!((n+=a)>o)&&qt(t,s,a/8,e.bigendian)}function c(e){At("get_binary"),At(e);var r=e.unit,a=jt(e,i),s=n/8;if(!0===a)return n=o,t.slice(s);var u=a*r;return!(u%8>0||n+u>o)&&(n+=u,t.slice(s,s+u/8))}function l(e){At("get_string"),At(e);var r=e.value.length,i=n/8;return!((n+=8*r)>o)&&t.slice(i,i+r).toString("utf8")}for(var f=e.length,d=0;d<f;d++){var h=e[d],p=!1;if("_"===h.name)p=a(h);else{switch(h.type){case"string":p=l(h);break;case"integer":p=s(h);break;case"float":p=u(h);break;case"binary":p=c(h)}if(!1===p)return!1;if(h.name)i[h.name]=p;else if(h.value!=p)return!1}}return n==o&&function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}(i)},Et.parse_int=Dt,Et.parse_float=qt;var zt={},Pt={};!function(e,t){var r=i,n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),o(n,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}({get exports(){return Pt},set exports(e){Pt=e}},Pt);var Qt=A,Kt=Pt.Buffer;function Ht(e,t,r,n){for(var i=0,o=r.length;i<o;i++){var a=r[i];switch(a.type){case"string":t+=e.write(a.value,t,"utf8");break;case"binary":t+=Gt(a,e,t,n);break;case"integer":t+=Yt(a,e,t,n);break;case"float":t+=Jt(a,e,t,n)}}return t}function Wt(e,t){var r=function(e,t){for(var r=0,n=0,i=e.length;n<i;n++)r+=$t(e[n],t);return r}(e,t),n=Kt.alloc(r);return Ht(n,0,e,t),n}function $t(e,t){return"string"==typeof e.size?t[e.size]*e.unit/8:"string"===e.type?Kt.byteLength(e.value,"utf8"):"binary"===e.type&&!0===e.size?t[e.name].length:e.size*e.unit/8}function Gt(e,t,r,n){var i=n[e.name],o=$t(e,n);return i.copy(t,r,0,o),o}function Yt(e,t,r,n){return Zt(t,e.name?n[e.name]:e.value,r,$t(e,n),e.bigendian)}function Zt(e,t,r,n,i){switch(n){case 1:e.writeUInt8(t,r);break;case 2:i?e.writeUInt16BE(t,r):e.writeUInt16LE(t,r);break;case 4:i?e.writeUInt32BE(t,r):e.writeUInt32LE(t,r);break;case 8:i?Qt.writeUInt64BE(e,t,r):Qt.writeUInt64LE(e,t,r);break;default:throw new Error("integer size * unit must be 8, 16, 32 or 64")}return n}function Jt(e,t,r,n){return Vt(t,e.name?n[e.name]:e.value,r,$t(e,n),e.bigendian)}function Vt(e,t,r,n,i){if(4===n)i?e.writeFloatBE(t,r):e.writeFloatLE(t,r);else{if(8!==n)throw new Error("float size * unit must be 32 or 64");i?e.writeDoubleBE(t,r):e.writeDoubleLE(t,r)}return n}var Xt=ot.parse;zt.write=Ht,zt.build=Wt,zt.write_int=Zt,zt.write_float=Vt,zt.builder=function(e){e=arguments.length>1?[].join.call(arguments,","):e;var t=Xt(e);return function(e){return Wt(t,e)}};var er={},tr=r.format,rr=ot.parse,nr=Et,ir=nr.parse_int,or=nr.parse_float,ar=zt,sr=ar.write_int,ur=ar.write_float,cr=Pt.Buffer,lr=[];function fr(){lr=[]}function dr(){lr.push(tr.apply(null,arguments))}function hr(){return lr.join("\n")}function pr(e){return"string"==typeof e.size?tr("%s * %d",mr(e.size),e.unit):(e.size*e.unit).toString()}function gr(e){if("_"===e.name)!function(e){if("string"==typeof e.size)dr("var skipbits = %s * %d;",mr(e.size),e.unit),dr("if (offset + skipbits > binsize) { return false; }"),dr("else { offset += skipbits; }");else if(!0===e.size)dr("if (offset % 8 === 0) { offset = binsize; }"),dr("else { return false; }");else{var t=e.unit*e.size;dr("if (offset + %d > binsize) { return false; }",t),dr("else { offset += %d; }",t)}}(e);else{switch(e.type){case"integer":case"float":!function(e){dr("bits = %s;\n",pr(e));var t="integer"===e.type?"parse_int":"parse_float",r=e.bigendian,n=e.signed;dr("byteoffset = offset / 8; offset += bits"),dr("if (offset > binsize) { return false; }"),dr("else { result = %s(bin, byteoffset, bits / 8, %s, %s); }",t,r,n)}(e);break;case"binary":!function(e){dr("byteoffset = offset / 8;"),!0===e.size?(dr("offset = binsize;"),dr("result = bin.slice(byteoffset);")):(dr("bits = %s;",pr(e)),dr("offset += bits;"),dr("if (offset > binsize) { return false; }"),dr("else { result = bin.slice(byteoffset,","byteoffset + bits / 8); }"))}(e);break;case"string":!function(e){dr("byteoffset = offset / 8;");var t=e.value.length;dr("offset += %d;",8*t),dr("if (offset > binsize) { return false; }"),dr("else { result = bin.toString(byteoffset,",tr("byteoffset + %d); }",t))}(e)}if(dr("if (result === false) return false;"),e.name)dr("else if (%s !== undefined) {",mr(e.name)),dr("if (%s != result) return false;",mr(e.name)),dr("}"),dr("else %s = result;",mr(e.name));else dr("else if (result != %s) return false;",JSON.stringify(e.value))}}function mr(e){return"var_"+e}function vr(e){fr(),dr("return function(binary, env) {"),dr("'use strict';"),dr("var bin = binary, env = env || {};"),dr("var offset = 0, binsize = bin.length * 8;"),dr("var bits, result, byteoffset;");for(var t=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r].name;n&&"_"!==n&&(t[n]=!0),"string"==typeof(n=e[r].size)&&(t[n]=!0)}return Object.keys(t)}(e),r=0;r<t.length;r++){dr("var %s = env['%s'];",mr(a=t[r]),a)}for(var n=e.length,i=0;i<n;i++){var o=e[i];dr("// "+JSON.stringify(o)),gr(o)}dr("if (offset == binsize) {"),dr("return {");for(r=0;r<t.length;r++){var a;dr("%s: %s,",a=t[r],mr(a))}return dr("};"),dr("}"),dr("else return false;"),dr("}"),new Function("parse_int","parse_float",hr())(ir,or)}function wr(e){switch(e.type){case"string":dr("offset += buf.write(%s, offset, 'utf8');",JSON.stringify(e.value));break;case"binary":dr("val = bindings['%s'];",e.name),!0===e.size?dr("size = val.length;"):"string"==typeof e.size?dr("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):dr("size = %d;",e.size*e.unit/8),dr("val.copy(buf, offset, 0, size);"),dr("offset += size;");break;case"integer":case"float":!function(e){e.name?dr("val = bindings['%s'];",e.name):dr("val = %d",e.value);var t="integer"===e.type?"write_int":"write_float";"string"==typeof e.size?dr("size = (bindings['%s'] * %d) / 8;",e.size,e.unit):dr("size = %d;",e.size*e.unit/8);dr("%s(buf, val, offset, size, %s);",t,e.bigendian),dr("offset += size;")}(e)}}function yr(e){return fr(),dr("return function(bindings) {"),dr("'use strict';"),function(e){for(var t=[],r=0,n=0;n<e.length;n++)"string"==typeof(o=e[n]).size||!0===o.size?t.push(o):"string"===o.type?r+=cr.byteLength(o.value):r+=o.size*o.unit/8;if(dr("var buffersize = %d;",r),t.length>0)for(var i=0;i<t.length;i++){var o;!0===(o=t[i]).size?dr("buffersize += bindings['%s'].length;",o.name):dr("buffersize += (bindings['%s'] * %d) / 8;",o.size,o.unit)}}(e),dr("var buf = Buffer.alloc(buffersize);"),dr("var offset = 0;"),function(e){dr("var val, size;");for(var t=e.length,r=0;r<t;r++){var n=e[r];dr("// %s",JSON.stringify(n)),wr(n)}}(e),dr("return buf;"),dr("}"),new Function("write_int","write_float","Buffer",hr())(sr,ur,cr)}er.compile_pattern=vr,er.compile=function(){var e=[].join.call(arguments,",");return vr(rr(e))},er.compile_builder=function(){var e=[].join.call(arguments,",");return yr(rr(e))},it.parse=ot.parse,it.match=Et.match,it.build=zt.build,it.write=zt.write,it.matcher=it.compile=er.compile,it.builder=er.compile_builder;var br=R,Er=br.constants,Ir=br.decode,Br=it;nt.PROTOCOL_HEADER="AMQP"+String.fromCharCode(0,0,9,1);var Ur=Er.FRAME_METHOD,Cr=Er.FRAME_HEARTBEAT,kr=Er.FRAME_HEADER,xr=Er.FRAME_BODY,Tr=Er.FRAME_END,Or=Br.builder(xr,"channel:16, size:32, payload:size/binary",Tr);nt.makeBodyFrame=function(e,t){return Or({channel:e,size:t.length,payload:t})};var Sr=Br.matcher("type:8","channel:16","size:32","rest/binary");nt.parseFrame=function(e,t){var r=Sr(e);if(r){var n=r.size,i=r.rest;if(n>t)throw new Error("Frame size exceeds frame max");if(i.length>n){if(i[n]!==Tr)throw new Error("Invalid frame");return{type:r.type,channel:r.channel,size:n,payload:i.slice(0,n),rest:i.slice(n+1)}}}return!1};var Nr=Br.matcher("class:16","_weight:16","size:64","flagsAndfields/binary"),Lr=Br.matcher("id:32, args/binary"),Fr={channel:0};nt.decodeFrame=function(e){var t=e.payload;switch(e.type){case Ur:var r=Lr(t),n=r.id,i=Ir(n,r.args);return{id:n,channel:e.channel,fields:i};case kr:var o=Nr(t);n=o.class,i=Ir(n,o.flagsAndfields);return{id:n,channel:e.channel,size:o.size,fields:i};case xr:return{channel:e.channel,content:e.payload};case Cr:return Fr;default:throw new Error("Unknown frame type "+e.type)}},nt.HEARTBEAT_BUF=Buffer.from([Er.FRAME_HEARTBEAT,0,0,0,0,0,0,Er.FRAME_END]),nt.HEARTBEAT=Fr;var Mr={},Rr=o,_r="function"==typeof setImmediate?setImmediate:process.nextTick;function Ar(e){this.newStreams=[],this.oldStreams=[],this.blocked=!1,this.scheduledRead=!1,this.out=e;var t=this;e.on("drain",(function(){t.blocked=!1,t._readIncoming()}))}Ar.prototype._readIncoming=function(){if(!this.blocked){var e=!0,t=this.out;r(this.newStreams),e?(Rr.equal(0,this.newStreams.length),r(this.oldStreams)):(Rr(this.newStreams.length>0,"Expect some new streams to remain"),Array.prototype.push.apply(this.oldStreams,this.newStreams),this.newStreams=[]),this.blocked=!e}function r(r){for(var n;e&&(n=r.shift());){var i=n.read();null!==i&&(e=t.write(i),r.push(n))}}},Ar.prototype._scheduleRead=function(){var e=this;e.scheduledRead||(_r((function(){e.scheduledRead=!1,e._readIncoming()})),e.scheduledRead=!0)},Ar.prototype.pipeFrom=function(e){var t=this;function r(){t.newStreams.push(e),t._scheduleRead()}function n(){e.removeListener("readable",r),e.removeListener("error",n),e.removeListener("end",n),e.removeListener("unpipeFrom",i)}function i(e){e===t&&n()}e.on("unpipeFrom",i),e.on("end",n),e.on("error",n),e.on("readable",r)},Ar.prototype.unpipeFrom=function(e){e.emit("unpipeFrom",this)},Mr.Mux=Ar;var Dr,qr={},jr={get exports(){return qr},set exports(e){qr=e}},zr={};function Pr(){if(Dr)return zr;function e(e){return Object.prototype.toString.call(e)}return Dr=1,zr.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},zr.isBoolean=function(e){return"boolean"==typeof e},zr.isNull=function(e){return null===e},zr.isNullOrUndefined=function(e){return null==e},zr.isNumber=function(e){return"number"==typeof e},zr.isString=function(e){return"string"==typeof e},zr.isSymbol=function(e){return"symbol"==typeof e},zr.isUndefined=function(e){return void 0===e},zr.isRegExp=function(t){return"[object RegExp]"===e(t)},zr.isObject=function(e){return"object"==typeof e&&null!==e},zr.isDate=function(t){return"[object Date]"===e(t)},zr.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},zr.isFunction=function(e){return"function"==typeof e},zr.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},zr.isBuffer=i.Buffer.isBuffer,zr}var Qr,Kr,Hr,Wr,$r={},Gr={get exports(){return $r},set exports(e){$r=e}},Yr={},Zr={get exports(){return Yr},set exports(e){Yr=e}};function Jr(){return Kr||(Kr=1,function(e){try{var t=require("util");if("function"!=typeof t.inherits)throw"";e.exports=t.inherits}catch(t){e.exports=(Qr||(Qr=1,"function"==typeof Object.create?Zr.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Zr.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),Yr)}}(Gr)),$r}var Vr,Xr,en,tn,rn,nn,on,an,sn={};function un(){if(Vr)return sn;Vr=1;var e=i.Buffer,t=e.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};var r=sn.StringDecoder=function(r){switch(this.encoding=(r||"utf8").toLowerCase().replace(/[-_]/,""),function(e){if(e&&!t(e))throw new Error("Unknown encoding: "+e)}(r),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=n)}this.charBuffer=new e(6),this.charReceived=0,this.charLength=0};function n(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}return r.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(e=e.slice(r,e.length),!((i=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var n=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,n),n-=this.charReceived);var i;n=(t+=e.toString(this.encoding,0,n)).length-1;if((i=t.charCodeAt(n))>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,n)}return t},r.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},r.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t},sn}function cn(){if(en)return Xr;en=1,Xr=d;var e=Wr?Hr:(Wr=1,Hr=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}),t=i.Buffer;d.ReadableState=f;var n=s.EventEmitter;n.listenerCount||(n.listenerCount=function(e,t){return e.listeners(t).length});var o,u=a,c=Pr();c.inherits=Jr();var l=r;function f(e,t){var r=fn(),n=(e=e||{}).highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(o||(o=un().StringDecoder),this.decoder=new o(e.encoding),this.encoding=e.encoding)}function d(e){if(fn(),!(this instanceof d))return new d(e);this._readableState=new f(e,this),this.readable=!0,u.call(this)}function h(e,t,r,n,i){var o=function(e,t){var r=null;c.isBuffer(t)||c.isString(t)||c.isNullOrUndefined(t)||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(t,r);if(o)e.emit("error",o);else if(c.isNullOrUndefined(r))t.reading=!1,t.ended||function(e,t){if(t.decoder&&!t.ended){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,m(e)}(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){a=new Error("stream.unshift() after end event");e.emit("error",a)}else!t.decoder||i||n||(r=t.decoder.write(r)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&m(e)),function(e,t){t.readingMore||(t.readingMore=!0,process.nextTick((function(){!function(e,t){var r=t.length;for(;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(l("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}(e,t)})))}(e,t);else i||(t.reading=!1);return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(t)}l=l&&l.debuglog?l.debuglog("stream"):function(){},c.inherits(d,u),d.prototype.push=function(e,r){var n=this._readableState;return c.isString(e)&&!n.objectMode&&(r=r||n.defaultEncoding)!==n.encoding&&(e=new t(e,r),r=""),h(this,n,e,r,!1)},d.prototype.unshift=function(e){return h(this,this._readableState,e,"",!0)},d.prototype.setEncoding=function(e){return o||(o=un().StringDecoder),this._readableState.decoder=new o(e),this._readableState.encoding=e,this};var p=8388608;function g(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||c.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=function(e){if(e>=p)e=p;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function m(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?process.nextTick((function(){v(e)})):v(e))}function v(e){l("emit readable"),e.emit("readable"),w(e)}function w(e){var t=e._readableState;if(l("flow",t.flowing),t.flowing)do{var r=e.read()}while(null!==r&&t.flowing)}function y(e,r){var n,i=r.buffer,o=r.length,a=!!r.decoder,s=!!r.objectMode;if(0===i.length)return null;if(0===o)n=null;else if(s)n=i.shift();else if(!e||e>=o)n=a?i.join(""):t.concat(i,o),i.length=0;else{if(e<i[0].length)n=(f=i[0]).slice(0,e),i[0]=f.slice(e);else if(e===i[0].length)n=i.shift();else{n=a?"":new t(e);for(var u=0,c=0,l=i.length;c<l&&u<e;c++){var f=i[0],d=Math.min(e-u,f.length);a?n+=f.slice(0,d):f.copy(n,u,0,d),d<f.length?i[0]=f.slice(d):i.shift(),u+=d}}}return n}function b(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,process.nextTick((function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))})))}return d.prototype.read=function(e){l("read",e);var t=this._readableState,r=e;if((!c.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?b(this):m(this),null;if(0===(e=g(e,t))&&t.ended)return 0===t.length&&b(this),null;var n,i=t.needReadable;return l("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",i=!0),(t.ended||t.reading)&&l("reading or ended",i=!1),i&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=g(r,t)),n=e>0?y(e,t):null,c.isNull(n)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),r!==e&&t.ended&&0===t.length&&b(this),c.isNull(n)||this.emit("data",n),n},d.prototype._read=function(e){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(t,r){var i=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,l("pipe count=%d opts=%j",o.pipesCount,r);var a=(!r||!1!==r.end)&&t!==process.stdout&&t!==process.stderr?u:f;function s(e){l("onunpipe"),e===i&&f()}function u(){l("onend"),t.end()}o.endEmitted?process.nextTick(a):i.once("end",a),t.on("unpipe",s);var c=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&n.listenerCount(e,"data")&&(t.flowing=!0,w(e))}}(i);function f(){l("cleanup"),t.removeListener("close",p),t.removeListener("finish",g),t.removeListener("drain",c),t.removeListener("error",h),t.removeListener("unpipe",s),i.removeListener("end",u),i.removeListener("end",f),i.removeListener("data",d),!o.awaitDrain||t._writableState&&!t._writableState.needDrain||c()}function d(e){l("ondata"),!1===t.write(e)&&(l("false write response, pause",i._readableState.awaitDrain),i._readableState.awaitDrain++,i.pause())}function h(e){l("onerror",e),m(),t.removeListener("error",h),0===n.listenerCount(t,"error")&&t.emit("error",e)}function p(){t.removeListener("finish",g),m()}function g(){l("onfinish"),t.removeListener("close",p),m()}function m(){l("unpipe"),i.unpipe(t)}return t.on("drain",c),i.on("data",d),t._events&&t._events.error?e(t._events.error)?t._events.error.unshift(h):t._events.error=[h,t._events.error]:t.on("error",h),t.once("close",p),t.once("finish",g),t.emit("pipe",i),o.flowing||(l("pipe resume"),i.resume()),t},d.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}return-1===(i=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}(t.pipes,e))||(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this)),this},d.prototype.on=function(e,t){var r=u.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var n=this._readableState;if(!n.readableListening)if(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading)n.length&&m(this);else{var i=this;process.nextTick((function(){l("readable nexttick read 0"),i.read(0)}))}}return r},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!0,e.reading||(l("resume read 0"),this.read(0)),function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick((function(){!function(e,t){t.resumeScheduled=!1,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}(e,t)})))}(this,e)),this},d.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;for(var i in e.on("end",(function(){if(l("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)})),e.on("data",(function(i){(l("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length))&&(n.push(i)||(r=!0,e.pause()))})),e)c.isFunction(e[i])&&c.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(["error","close","destroy","pause","resume"],(function(t){e.on(t,n.emit.bind(n,t))})),n._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},n},d._fromList=y,Xr}function ln(){if(rn)return tn;rn=1,tn=s;var e=i.Buffer;s.WritableState=o;var t=Pr();t.inherits=Jr();var r=a;function n(e,t,r){this.chunk=e,this.encoding=t,this.callback=r}function o(e,t){var r=fn(),n=(e=e||{}).highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.objectMode=!!e.objectMode,t instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,i){r?process.nextTick((function(){t.pendingcb--,i(n)})):(t.pendingcb--,i(n));e._writableState.errorEmitted=!0,e.emit("error",n)}(e,r,n,t,i);else{var o=f(e,r);o||r.corked||r.bufferProcessing||!r.buffer.length||l(e,r),n?process.nextTick((function(){c(e,r,o,i)})):c(e,r,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function s(e){var t=fn();if(!(this instanceof s||this instanceof t))return new s(e);this._writableState=new o(e,this),this.writable=!0,r.call(this)}function u(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function c(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),h(e,t)}function l(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var r=[],n=0;n<t.buffer.length;n++)r.push(t.buffer[n].callback);t.pendingcb++,u(e,t,!0,t.length,t.buffer,"",(function(e){for(var n=0;n<r.length;n++)t.pendingcb--,r[n](e)})),t.buffer=[]}else{for(n=0;n<t.buffer.length;n++){var i=t.buffer[n],o=i.chunk,a=i.encoding,s=i.callback,c=t.objectMode?1:o.length;if(u(e,t,!1,c,o,a,s),t.writing){n++;break}}n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}t.bufferProcessing=!1}function f(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function d(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function h(e,t){var r=f(0,t);return r&&(0===t.pendingcb?(d(e,t),t.finished=!0,e.emit("finish")):d(e,t)),r}return t.inherits(s,r),s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(r,i,o){var a=this._writableState,s=!1;return t.isFunction(i)&&(o=i,i=null),t.isBuffer(r)?i="buffer":i||(i=a.defaultEncoding),t.isFunction(o)||(o=function(){}),a.ended?function(e,t,r){var n=new Error("write after end");e.emit("error",n),process.nextTick((function(){r(n)}))}(this,0,o):function(e,r,n,i){var o=!0;if(!(t.isBuffer(n)||t.isString(n)||t.isNullOrUndefined(n)||r.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");e.emit("error",a),process.nextTick((function(){i(a)})),o=!1}return o}(this,a,r,o)&&(a.pendingcb++,s=function(r,i,o,a,s){o=function(r,n,i){!r.objectMode&&!1!==r.decodeStrings&&t.isString(n)&&(n=new e(n,i));return n}(i,o,a),t.isBuffer(o)&&(a="buffer");var c=i.objectMode?1:o.length;i.length+=c;var l=i.length<i.highWaterMark;l||(i.needDrain=!0);i.writing||i.corked?i.buffer.push(new n(o,a,s)):u(r,i,!1,c,o,a,s);return l}(this,a,r,i,o)),s},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||l(this,e))},s.prototype._write=function(e,t,r){r(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,r,n){var i=this._writableState;t.isFunction(e)?(n=e,e=null,r=null):t.isFunction(r)&&(n=r,r=null),t.isNullOrUndefined(e)||this.write(e,r),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,h(e,t),r&&(t.finished?process.nextTick(r):e.once("finish",r));t.ended=!0}(this,i,n)},tn}function fn(){if(on)return nn;on=1,nn=i;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t},t=Pr();t.inherits=Jr();var r=cn(),n=ln();function i(e){if(!(this instanceof i))return new i(e);r.call(this,e),n.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}return t.inherits(i,r),function(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}(e(n.prototype),(function(e){i.prototype[e]||(i.prototype[e]=n.prototype[e])})),nn}var dn={};!function(e){var t=r.inherits,n=s.EventEmitter;function i(t,r,i){n.call(this),this.interval=t;var o=t*e.exports.UNITS_TO_MS,a=this.emit.bind(this,"beat"),s=this.emit.bind(this,"timeout");this.sendTimer=setInterval(this.runHeartbeat.bind(this,r,a),o/2);var u=0;this.recvTimer=setInterval(this.runHeartbeat.bind(this,(function(){return i()?(u=0,!0):++u<2}),s),o)}e.exports.UNITS_TO_MS=1e3,t(i,n),e.exports.Heart=i,i.prototype.clear=function(){clearInterval(this.sendTimer),clearInterval(this.recvTimer)},i.prototype.runHeartbeat=function(e,t){e()||t()}}({get exports(){return dn},set exports(e){dn=e}});var hn={},pn=R,gn=r.format;r.inherits;var mn=nt.HEARTBEAT;hn.closeMessage=function(e){var t=e.fields.replyCode;return gn('%d (%s) with message "%s"',t,pn.constant_strs[t],e.fields.replyText)},hn.methodName=function(e){return pn.info(e).name},hn.inspect=function(e,t){if(e===mn)return"<Heartbeat>";if(e.id){var r=pn.info(e.id);return gn("<%s channel:%d%s>",r.name,e.channel,t?" "+JSON.stringify(e.fields,void 0,2):"")}return gn("<Content channel:%d size:%d>",e.channel,e.size)};var vn={};function wn(e){return Math.floor(e/32)}function yn(e){if(0===e)return 32;let t,r=31;return t=e<<16,0!=t&&(r-=16,e=t),t=e<<8,0!=t&&(r-=8,e=t),t=e<<4,0!=t&&(r-=4,e=t),t=e<<2,0!=t&&(r-=2,e=t),r-(e<<1>>>31)}vn.BitSet=class{constructor(e){if(e){const t=Math.ceil(e/32);this.words=new Array(t)}else this.words=[];this.wordsInUse=0}ensureSize(e){const t=this.words.length;t<e&&(this.words=this.words.concat(new Array(e-t)))}set(e){const t=wn(e);t>=this.wordsInUse&&(this.ensureSize(t+1),this.wordsInUse=t+1);const r=1<<e;this.words[t]|=r}clear(e){const t=wn(e);if(t>=this.wordsInUse)return;const r=~(1<<e);this.words[t]&=r}get(e){const t=wn(e);if(t>=this.wordsInUse)return!1;const r=1<<e;return!!(this.words[t]&r)}nextSetBit(e){let t=wn(e);if(t>=this.wordsInUse)return-1;let r=this.words[t]&4294967295<<e;for(;;){if(r)return 32*t+yn(r);if(t++,t===this.wordsInUse)return-1;r=this.words[t]}}nextClearBit(e){let t=wn(e);if(t>=this.wordsInUse)return e;let r=~this.words[t]&4294967295<<e;for(;;){if(r)return 32*t+yn(r);if(t++,t==this.wordsInUse)return 32*t;r=~this.words[t]}}};var bn,En,In,Bn,Un,Cn={},kn={get exports(){return Cn},set exports(e){Cn=e}};function xn(){if(En)return bn;En=1,bn=n;var e=fn(),t=Pr();function r(e,r){this.afterTransform=function(e,n){return function(e,r,n){var i=e._transformState;i.transforming=!1;var o=i.writecb;if(!o)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,t.isNullOrUndefined(n)||e.push(n);o&&o(r);var a=e._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&e._read(a.highWaterMark)}(r,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(o){if(!(this instanceof n))return new n(o);e.call(this,o),this._transformState=new r(o,this);var a=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",(function(){t.isFunction(this._flush)?this._flush((function(e){i(a,e)})):i(a)}))}function i(e,t){if(t)return e.emit("error",t);var r=e._writableState,n=e._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}return t.inherits=Jr(),t.inherits(n,e),n.prototype.push=function(t,r){return this._transformState.needTransform=!1,e.prototype.push.call(this,t,r)},n.prototype._transform=function(e,t,r){throw new Error("not implemented")},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},n.prototype._read=function(e){var r=this._transformState;t.isNull(r.writechunk)||!r.writecb||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},bn}var Tn={};function On(e,t){return e&&e.split("\n").slice(t).join("\n")}function Sn(e,t){var r=new Error;this.message=e,this.stack=this.toString()+"\n"+On(r.stack,2),this.stackAtStateChange=t}(0,r.inherits)(Sn,Error),Sn.prototype.name="IllegalOperationError",Tn.IllegalOperationError=Sn,Tn.stackCapture=function(e){return"Stack capture: "+e+"\n"+On((new Error).stack,2)};var Nn=R,Ln=Nn.constants,Fn=nt,Mn=Fn.HEARTBEAT,Rn=Mr.Mux,_n=a.Duplex||(an||(an=1,jr.exports=fn()),qr),An=s.EventEmitter,Dn=dn.Heart,qn=hn.methodName,jn=hn.closeMessage,zn=hn.inspect,Pn=vn.BitSet,Qn=r.inherits,Kn=r.format,Hn=a.PassThrough||(Un||(Un=1,kn.exports=function(){if(Bn)return In;Bn=1,In=r;var e=xn(),t=Pr();function r(t){if(!(this instanceof r))return new r(t);e.call(this,t)}return t.inherits=Jr(),t.inherits(r,e),r.prototype._transform=function(e,t,r){r(null,e)},In}()),Cn),Wn=Tn.IllegalOperationError,$n=Tn.stackCapture;function Gn(e){An.call(this);var t=this.stream=function(e){if(e instanceof _n)return e;var t=new _n;return t.wrap(e),t._write=function(t,r,n){return e.write(t,r,n)},t}(e);this.muxer=new Rn(t),this.rest=Buffer.alloc(0),this.frameMax=Ln.FRAME_MIN_SIZE,this.sentSinceLastCheck=!1,this.recvSinceLastCheck=!1,this.expectSocketClose=!1,this.freeChannels=new Pn,this.channels=[{channel:{accept:Jn(this)},buffer:e}]}Qn(Gn,An);var Yn=Gn.prototype;function Zn(e){var t=this.channels[e.channel];if(t)return t.channel.accept(e);this.closeWithError(Kn("Frame on unknown channel %d",e.channel),Ln.CHANNEL_ERROR,new Error(Kn("Frame on unknown channel: %s",zn(e,!1))))}function Jn(e){return function(t){if(t===Mn);else if(t.id===Nn.ConnectionClose){e.sendMethod(0,Nn.ConnectionCloseOk,{});var r=Kn("Connection closed: %s",jn(t)),n=$n(r),i=new Error(r);i.code=t.fields.replyCode,ai(i)&&e.emit("error",i),e.toClosed(n,i)}else t.id===Nn.ConnectionBlocked?e.emit("blocked",t.fields.reason):t.id===Nn.ConnectionUnblocked?e.emit("unblocked"):e.closeWithError(Kn("Unexpected frame on channel 0"),Ln.UNEXPECTED_FRAME,new Error(Kn("Unexpected frame on channel 0: %s",zn(t,!1))))}}function Vn(e,t){return function(){throw new Wn(e,t)}}function Xn(e,t,r){e.sendMethod=e.sendContent=e.sendMessage=Vn(t,r)}Yn.sendProtocolHeader=function(){this.sendBytes(Fn.PROTOCOL_HEADER)},Yn.open=function(e,t){var r=this,n=t||function(){},i=Object.create(e);function o(e){r.step((function(t,r){null!==t?s(t):0!==r.channel?s(new Error(Kn("Frame on channel != 0 during handshake: %s",zn(r,!1)))):e(r)}))}function a(e,t){o((function(r){r.id===e?t(r):s(new Error(Kn("Expected %s; got %s",qn(e),zn(r,!1))))}))}function s(e){n(e)}function u(e){r.sendMethod(0,e,i)}function c(e,t){return 0===e||0===t?Math.max(e,t):Math.min(e,t)}function l(t){switch(t.id){case Nn.ConnectionSecure:s(new Error("Wasn't expecting to have to go through secure"));break;case Nn.ConnectionClose:s(new Error(Kn("Handshake terminated by server: %s",jn(t))));break;case Nn.ConnectionTune:var r=t.fields;i.frameMax=c(r.frameMax,e.frameMax),i.channelMax=c(r.channelMax,e.channelMax),i.heartbeat=c(r.heartbeat,e.heartbeat);try{u(Nn.ConnectionTuneOk),u(Nn.ConnectionOpen)}catch(e){return void s(e)}a(Nn.ConnectionOpenOk,f);break;default:s(new Error(Kn("Expected connection.secure, connection.close, or connection.tune during handshake; got %s",zn(t,!1))))}}function f(e){var t;r.channelMax=i.channelMax||65535,r.frameMax=i.frameMax||4294967295,r.heartbeat=i.heartbeat,r.heartbeater=r.startHeartbeater(),r.accept=Zn,t=e,r.stream.removeListener("end",d),r.stream.removeListener("error",d),r.stream.on("error",r.onSocketError.bind(r)),r.stream.on("end",r.onSocketError.bind(r,new Error("Unexpected close"))),r.on("frameError",r.onSocketError.bind(r)),r.acceptLoop(),n(null,t)}function d(e){s(e||new Error("Socket closed abruptly during opening handshake"))}this.stream.on("end",d),this.stream.on("error",d),this.sendProtocolHeader(),a(Nn.ConnectionStart,(function(t){if(t.fields.mechanisms.toString().split(" ").indexOf(e.mechanism)<0)s(new Error(Kn("SASL mechanism %s is not provided by the server",e.mechanism)));else{r.serverProperties=t.fields.serverProperties;try{u(Nn.ConnectionStartOk)}catch(e){return void s(e)}o(l)}}))},Yn.close=function(e){var t=e&&function(){e(null)};this.closeBecause("Cheers, thanks",Ln.REPLY_SUCCESS,t)},Yn.closeBecause=function(e,t,r){this.sendMethod(0,Nn.ConnectionClose,{replyText:e,replyCode:t,methodId:0,classId:0});var n=$n("closeBecause called: "+e);this.toClosing(n,r)},Yn.closeWithError=function(e,t,r){this.emit("error",r),this.closeBecause(e,t)},Yn.onSocketError=function(e){if(!this.expectSocketClose){this.expectSocketClose=!0,this.emit("error",e);var t=$n("Socket error");this.toClosed(t,e)}},Yn.toClosing=function(e,t){var r=this.sendMethod.bind(this);this.accept=function(e){if(e.id===Nn.ConnectionCloseOk){t&&t();var n=$n("ConnectionCloseOk received");this.toClosed(n,void 0)}else e.id===Nn.ConnectionClose&&r(0,Nn.ConnectionCloseOk,{})},Xn(this,"Connection closing",e)},Yn._closeChannels=function(e){for(var t=1;t<this.channels.length;t++){var r=this.channels[t];null!==r&&r.channel.toClosed(e)}},Yn.toClosed=function(e,t){this._closeChannels(e);var r=Kn("Connection closed (%s)",t?t.toString():"by client");Xn(this,r,e),this.accept=Vn(r,e),this.close=function(t){t&&t(new Wn(r,e))},this.heartbeater&&this.heartbeater.clear(),this.expectSocketClose=!0,this.stream.end(),this.emit("close",t)},Yn.startHeartbeater=function(){if(0===this.heartbeat)return null;var e=this,t=new Dn(this.heartbeat,this.checkSend.bind(this),this.checkRecv.bind(this));return t.on("timeout",(function(){var t=new Error("Heartbeat timeout");e.emit("error",t);var r=$n("Heartbeat timeout");e.toClosed(r,t)})),t.on("beat",(function(){e.sendHeartbeat()})),t},Yn.freshChannel=function(e,t){var r=this.freeChannels.nextClearBit(1);if(r<0||r>this.channelMax)throw new Error("No channels left to allocate");this.freeChannels.set(r);var n=t&&t.highWaterMark||1024,i=new Hn({objectMode:!0,highWaterMark:n});return this.channels[r]={channel:e,buffer:i},i.on("drain",(function(){e.onBufferDrain()})),this.muxer.pipeFrom(i),r},Yn.releaseChannel=function(e){this.freeChannels.clear(e),this.channels[e].buffer.end(),this.channels[e]=null},Yn.acceptLoop=function(){var e=this;function t(){try{for(var t;t=e.recvFrame();)e.accept(t)}catch(t){e.emit("frameError",t)}}e.stream.on("readable",t),t()},Yn.step=function(e){var t=this;!function r(){var n;try{n=t.recvFrame()}catch(t){return void e(t,null)}n?e(null,n):t.stream.once("readable",r)}()},Yn.checkSend=function(){var e=this.sentSinceLastCheck;return this.sentSinceLastCheck=!1,e},Yn.checkRecv=function(){var e=this.recvSinceLastCheck;return this.recvSinceLastCheck=!1,e},Yn.sendBytes=function(e){this.sentSinceLastCheck=!0,this.stream.write(e)},Yn.sendHeartbeat=function(){return this.sendBytes(Fn.HEARTBEAT_BUF)};var ei=Nn.encodeMethod,ti=Nn.encodeProperties;Yn.sendMethod=function(e,t,r){var n=ei(t,e,r);return this.sentSinceLastCheck=!0,this.channels[e].buffer.write(n)},Yn.sendMessage=function(e,t,r,n,i,o){if(!Buffer.isBuffer(o))throw new TypeError("content is not a buffer");var a=ei(t,e,r),s=ti(n,e,o.length,i),u=this.channels[e].buffer;this.sentSinceLastCheck=!0;var c=a.length+s.length,l=o.length>0?o.length+ri:0,f=c+l;if(f<2048){var d=Buffer.allocUnsafe(f),h=a.copy(d,0);return h+=s.copy(d,h),l>0&&ni(e,o).copy(d,h),u.write(d)}if(c<2048){var p=Buffer.allocUnsafe(c);h=a.copy(p,0);s.copy(p,h),u.write(p)}else u.write(a),u.write(s);return this.sendContent(e,o)};var ri=Nn.FRAME_OVERHEAD,ni=Fn.makeBodyFrame;Yn.sendContent=function(e,t){if(!Buffer.isBuffer(t))throw new TypeError(Kn("Expected buffer; got %s",t));for(var r=!0,n=this.channels[e].buffer,i=this.frameMax-ri,o=0;o<t.length;o+=i){var a=o+i,s=a>t.length?t.slice(o):t.slice(o,a),u=ni(e,s);r=n.write(u)}return this.sentSinceLastCheck=!0,r};var ii=Fn.parseFrame,oi=Fn.decodeFrame;function ai(e){switch(e&&e.code){case Nn.constants.CONNECTION_FORCED:case Nn.constants.REPLY_SUCCESS:return!1;default:return!0}}Yn.recvFrame=function(){var e=ii(this.rest,this.frameMax);if(e)return this.rest=e.rest,oi(e);var t=this.stream.read();return null!==t&&(this.recvSinceLastCheck=!0,this.rest=Buffer.concat([this.rest,t]),this.recvFrame())},M.Connection=Gn,M.isFatalError=ai;var si={},ui=_;si.plain=function(e,t){return{mechanism:"PLAIN",response:function(){return Buffer.from(["",e,t].join(String.fromCharCode(0)))},username:e,password:t}},si.amqplain=function(e,t){return{mechanism:"AMQPLAIN",response:function(){const r=Buffer.alloc(16384),n=ui.encodeTable(r,{LOGIN:e,PASSWORD:t},0);return r.slice(4,n)},username:e,password:t}},si.external=function(){return{mechanism:"EXTERNAL",response:function(){return Buffer.from("")}}};var ci="0.10.3",li=F,fi=e,di=M.Connection,hi=r.format,pi=si;function gi(e,t){for(var r=Object.keys(e),n=r.length;n--;){var i=r[n];t[i]=e[i]}return t}var mi={product:"amqplib",version:ci,platform:hi("Node.JS %s",process.version),information:"http://squaremo.github.io/amqp.node",capabilities:{publisher_confirms:!0,exchange_exchange_bindings:!0,"basic.nack":!0,consumer_cancel_notify:!0,"connection.blocked":!0,authentication_failure_close:!0}};function vi(e,t,r,n){e=e?fi.unescape(e):"/";t=t||{};function i(e,t){return void 0===e?t:parseInt(e)}return{clientProperties:gi(n,Object.create(mi)),mechanism:r.mechanism,response:r.response(),locale:t.locale||"en_US",channelMax:i(t.channelMax,0),frameMax:i(t.frameMax,4096),heartbeat:i(t.heartbeat,0),virtualHost:e,capabilities:"",insist:0}}function wi(e){var t="guest",r="guest";return""==e.username&&""==e.password||(t=e.username?unescape(e.username):"",r=e.password?unescape(e.password):""),pi.plain(t,r)}h.connect=function(e,t,r){var n=gi(t||{},{});e=e||"amqp://localhost";var i,o,a=!!n.noDelay,s=n.timeout,l=!!n.keepAlive,f=n.keepAliveDelay||0,d=n.clientProperties||{};if("object"==typeof e){var h,p;i=(e.protocol||"amqp")+":",n.host=e.hostname,n.servername=n.servername||e.hostname,n.port=e.port||("amqp:"===i?5672:5671),null==e.username&&null==e.password?(h="guest",p="guest"):(h=e.username||"",p=e.password||"");var g={locale:e.locale,channelMax:e.channelMax,frameMax:e.frameMax,heartbeat:e.heartbeat};o=vi(e.vhost,g,n.credentials||pi.plain(h,p),d)}else{var m=li(e,!0);i=m.protocol,n.host=m.hostname,n.servername=n.servername||m.hostname,n.port=parseInt(m.port)||("amqp:"===i?5672:5671);var v=m.pathname?m.pathname.substr(1):null;o=vi(v,m.query,n.credentials||wi(m),d)}var w,y=!1;function b(){y=!0,w.setNoDelay(a),l&&w.setKeepAlive(l,f);var e=new di(w);e.open(o,(function(t,n){s&&w.setTimeout(0),null===t?r(null,e):(w.end(),w.destroy(),r(t))}))}if("amqp:"===i)w=u.connect(n,b);else{if("amqps:"!==i)throw new Error("Expected amqp: or amqps: as the protocol; got "+i);w=c.connect(n,b)}s&&w.setTimeout(s,(function(){w.end(),w.destroy(),r(new Error("connect ETIMEDOUT"))})),w.once("error",(function(e){y||r(e)}))},h.credentialsFromUrl=wi;var yi={},bi={},Ei=R,Ii=hn.closeMessage,Bi=hn.inspect,Ui=hn.methodName,Ci=o,ki=r.inherits,xi=s.EventEmitter,Ti=r.format,Oi=Tn.IllegalOperationError,Si=Tn.stackCapture;function Ni(e){xi.call(this),this.connection=e,this.reply=null,this.pending=[],this.lwm=1,this.unconfirmed=[],this.on("ack",this.handleConfirm.bind(this,(function(e){e&&e(null)}))),this.on("nack",this.handleConfirm.bind(this,(function(e){e&&e(new Error("message nacked"))}))),this.on("close",(function(){for(var e;e=this.unconfirmed.shift();)e&&e(new Error("channel closed"))})),this.handleMessage=Ri}ki(Ni,xi),bi.Channel=Ni,bi.acceptMessage=_i;var Li=Ni.prototype;function Fi(e,t){return function(){throw new Oi(e,t)}}function Mi(e,t,r){e.sendImmediately=e.sendOrEnqueue=e.sendMessage=Fi(t,r)}function Ri(e){var t;if(e.id===Ei.BasicDeliver)t="delivery";else{if(e.id!==Ei.BasicReturn)throw Ti("Expected BasicDeliver or BasicReturn; got %s",Bi(e));t="return"}var r=this,n=e.fields;return _i((function(e){e.fields=n,r.emit(t,e)}))}function _i(e){var t=0,r=0,n=null,i={fields:null,properties:null,content:null};return function(n){if(n.id===Ei.BasicProperties)return i.properties=n.fields,0===(t=r=n.size)?(i.content=Buffer.alloc(0),e(i),Ri):o;throw"Expected headers frame after delivery"};function o(a){if(a.content){var s=a.content.length;if(0===(r-=s))return null!==n?(n.push(a.content),i.content=Buffer.concat(n)):i.content=a.content,e(i),Ri;if(r<0)throw Ti("Too much content sent! Expected %d bytes",t);return null!==n?n.push(a.content):n=[a.content],o}throw"Expected content frame after headers"}}function Ai(e){Ni.call(this,e),this.consumers=new Map}function Di(e,t,r){null!=r&&(e[t]=r)}Li.allocate=function(){return this.ch=this.connection.freshChannel(this),this},Li.sendImmediately=function(e,t){return this.connection.sendMethod(this.ch,e,t)},Li.sendOrEnqueue=function(e,t,r){this.reply?this.pending.push({method:e,fields:t,reply:r}):(Ci(0===this.pending.length),this.reply=r,this.sendImmediately(e,t))},Li.sendMessage=function(e,t,r){return this.connection.sendMessage(this.ch,Ei.BasicPublish,e,Ei.BasicProperties,t,r)},Li._rpc=function(e,t,r,n){var i=this;this.sendOrEnqueue(e,t,(function(t,o){if(null===t){if(o.id===r)return n(null,o);var a=Ui(r),s=new Error(Ti("Expected %s; got %s",a,Bi(o,!1)));return i.closeWithError(o.id,Ti("Expected %s; got %s",a,Ui(o.id)),Ei.constants.UNEXPECTED_FRAME,s),n(s)}if(t instanceof Error)return n(t);var u=(t.fields.classId<<16)+t.fields.methodId,c=(s=e===u?Ti("Operation failed: %s; %s",Ui(e),Ii(t)):Ti("Channel closed by server: %s",Ii(t)),new Error(s));return c.code=t.fields.replyCode,c.classId=t.fields.classId,c.methodId=t.fields.methodId,n(c)}))},Li.toClosed=function(e){this._rejectPending(),Mi(this,"Channel closed",e),this.accept=Fi("Channel closed",e),this.connection.releaseChannel(this.ch),this.emit("close")},Li.toClosing=function(e,t){var r=this.sendImmediately.bind(this);Mi(this,"Channel closing",e),this.accept=function(e){if(e.id===Ei.ChannelCloseOk){t&&t();var n=Si("ChannelCloseOk frame received");this.toClosed(n)}else e.id===Ei.ChannelClose&&r(Ei.ChannelCloseOk,{})}},Li._rejectPending=function(){function e(e){e(new Error("Channel ended, no reply will be forthcoming"))}var t;for(null!==this.reply&&e(this.reply),this.reply=null;t=this.pending.shift();)e(t.reply);this.pending=null},Li.closeBecause=function(e,t,r){this.sendImmediately(Ei.ChannelClose,{replyText:e,replyCode:t,methodId:0,classId:0});var n=Si("closeBecause called: "+e);this.toClosing(n,r)},Li.closeWithError=function(e,t,r,n){var i=this;this.closeBecause(t,r,(function(){n.code=r,e&&(n.classId=Ei.info(e).classId,n.methodId=Ei.info(e).methodId),i.emit("error",n)}))},Li.acceptMessageFrame=function(e){try{this.handleMessage=this.handleMessage(e)}catch(t){"string"==typeof t?this.closeWithError(e.id,t,Ei.constants.UNEXPECTED_FRAME,new Error(t)):t instanceof Error?this.closeWithError(e.id,"Error while processing message",Ei.constants.INTERNAL_ERROR,t):this.closeWithError(e.id,"Internal error while processing message",Ei.constants.INTERNAL_ERROR,new Error(t.toString()))}},Li.handleConfirm=function(e,t){var r=t.deliveryTag;if(t.multiple){var n=this.unconfirmed.splice(0,r-this.lwm+1);this.lwm=r+1,n.forEach(e)}else{var i;if(r===this.lwm)for(i=this.unconfirmed.shift(),this.lwm++;null===this.unconfirmed[0];)this.unconfirmed.shift(),this.lwm++;else i=this.unconfirmed[r-this.lwm],this.unconfirmed[r-this.lwm]=null;e(i)}},Li.pushConfirmCallback=function(e){this.unconfirmed.push(e||!1)},Li.accept=function(e){switch(e.id){case void 0:case Ei.BasicDeliver:case Ei.BasicReturn:case Ei.BasicProperties:return this.acceptMessageFrame(e);case Ei.BasicAck:return this.emit("ack",e.fields);case Ei.BasicNack:return this.emit("nack",e.fields);case Ei.BasicCancel:return this.emit("cancel",e.fields);case Ei.ChannelClose:if(this.reply){var t=this.reply;this.reply=null,t(e)}var r="Channel closed by server: "+Ii(e);this.sendImmediately(Ei.ChannelCloseOk,{});var n=new Error(r);n.code=e.fields.replyCode,n.classId=e.fields.classId,n.methodId=e.fields.methodId,this.emit("error",n);var i=Si(r);return void this.toClosed(i);case Ei.BasicFlow:return this.closeWithError(e.id,"Flow not implemented",Ei.constants.NOT_IMPLEMENTED,new Error("Flow not implemented"));default:t=this.reply;if(this.reply=null,this.pending.length>0){var o=this.pending.shift();this.reply=o.reply,this.sendImmediately(o.method,o.fields)}return t(null,e)}},Li.onBufferDrain=function(){this.emit("drain")},ki(Ai,Ni),bi.BaseChannel=Ai,Ai.prototype.registerConsumer=function(e,t){this.consumers.set(e,t)},Ai.prototype.unregisterConsumer=function(e){this.consumers.delete(e)},Ai.prototype.dispatchMessage=function(e,t){var r=e.consumerTag,n=this.consumers.get(r);if(n)return n(t);throw new Error("Unknown consumer: "+r)},Ai.prototype.handleDelivery=function(e){return this.dispatchMessage(e.fields,e)},Ai.prototype.handleCancel=function(e){var t=this.dispatchMessage(e,null);return this.unregisterConsumer(e.consumerTag),t};var qi=Object.freeze({}),ji={assertQueue:function(e,t){e=e||"",t=t||qi;var r=Object.create(t.arguments||null);return Di(r,"x-expires",t.expires),Di(r,"x-message-ttl",t.messageTtl),Di(r,"x-dead-letter-exchange",t.deadLetterExchange),Di(r,"x-dead-letter-routing-key",t.deadLetterRoutingKey),Di(r,"x-max-length",t.maxLength),Di(r,"x-max-priority",t.maxPriority),Di(r,"x-overflow",t.overflow),Di(r,"x-queue-mode",t.queueMode),{queue:e,exclusive:!!t.exclusive,durable:void 0===t.durable||t.durable,autoDelete:!!t.autoDelete,arguments:r,passive:!1,ticket:0,nowait:!1}},checkQueue:function(e){return{queue:e,passive:!0,nowait:!1,durable:!0,autoDelete:!1,exclusive:!1,ticket:0}},deleteQueue:function(e,t){return{queue:e,ifUnused:!!(t=t||qi).ifUnused,ifEmpty:!!t.ifEmpty,ticket:0,nowait:!1}},purgeQueue:function(e){return{queue:e,ticket:0,nowait:!1}},bindQueue:function(e,t,r,n){return{queue:e,exchange:t,routingKey:r,arguments:n,ticket:0,nowait:!1}},unbindQueue:function(e,t,r,n){return{queue:e,exchange:t,routingKey:r,arguments:n,ticket:0,nowait:!1}},assertExchange:function(e,t,r){r=r||qi;var n=Object.create(r.arguments||null);return Di(n,"alternate-exchange",r.alternateExchange),{exchange:e,ticket:0,type:t,passive:!1,durable:void 0===r.durable||r.durable,autoDelete:!!r.autoDelete,internal:!!r.internal,nowait:!1,arguments:n}},checkExchange:function(e){return{exchange:e,passive:!0,nowait:!1,durable:!0,internal:!1,type:"",autoDelete:!1,ticket:0}},deleteExchange:function(e,t){return{exchange:e,ifUnused:!!(t=t||qi).ifUnused,ticket:0,nowait:!1}},bindExchange:function(e,t,r,n){return{source:t,destination:e,routingKey:r,arguments:n,ticket:0,nowait:!1}},unbindExchange:function(e,t,r,n){return{source:t,destination:e,routingKey:r,arguments:n,ticket:0,nowait:!1}},publish:function(e,t,r){function n(e){return void 0===e?void 0:Array.isArray(e)?e.map(String):[String(e)]}r=r||qi;var i,o=Object.create(r.headers||null);Di(o,"CC",n(r.CC)),Di(o,"BCC",n(r.BCC)),void 0!==r.persistent?i=r.persistent?2:1:"number"==typeof r.deliveryMode?i=r.deliveryMode:r.deliveryMode&&(i=2);var a=r.expiration;return void 0!==a&&(a=a.toString()),{exchange:e,routingKey:t,mandatory:!!r.mandatory,immediate:!1,ticket:void 0,contentType:r.contentType,contentEncoding:r.contentEncoding,headers:o,deliveryMode:i,priority:r.priority,correlationId:r.correlationId,replyTo:r.replyTo,expiration:a,messageId:r.messageId,timestamp:r.timestamp,type:r.type,userId:r.userId,appId:r.appId,clusterId:void 0}},consume:function(e,t){t=t||qi;var r=Object.create(t.arguments||null);return Di(r,"x-priority",t.priority),{ticket:0,queue:e,consumerTag:t.consumerTag||"",noLocal:!!t.noLocal,noAck:!!t.noAck,exclusive:!!t.exclusive,nowait:!1,arguments:r}},cancel:function(e){return{consumerTag:e,nowait:!1}},get:function(e,t){return{ticket:0,queue:e,noAck:!!(t=t||qi).noAck}},ack:function(e,t){return{deliveryTag:e,multiple:!!t}},nack:function(e,t,r){return{deliveryTag:e,multiple:!!t,requeue:void 0===r||r}},reject:function(e,t){return{deliveryTag:e,requeue:void 0===t||t}},prefetch:function(e,t){return{prefetchCount:e||0,prefetchSize:0,global:!!t}},recover:function(){return{requeue:!0}}},zi=Object.freeze(ji);const Pi=s,Qi=r.promisify,Ki=R,{BaseChannel:Hi}=bi,{acceptMessage:Wi}=bi,$i=zi,{inspect:Gi}=hn;class Yi extends Hi{constructor(e){super(e),this.on("delivery",this.handleDelivery.bind(this)),this.on("cancel",this.handleCancel.bind(this))}async rpc(e,t,r){return(await Qi((n=>this._rpc(e,t,r,n)))()).fields}async open(){return(await this.allocate.bind(this)()).rpc(Ki.ChannelOpen,{outOfBand:""},Ki.ChannelOpenOk)}close(){return Qi((e=>this.closeBecause("Goodbye",Ki.constants.REPLY_SUCCESS,e)))()}assertQueue(e,t){return this.rpc(Ki.QueueDeclare,$i.assertQueue(e,t),Ki.QueueDeclareOk)}checkQueue(e){return this.rpc(Ki.QueueDeclare,$i.checkQueue(e),Ki.QueueDeclareOk)}deleteQueue(e,t){return this.rpc(Ki.QueueDelete,$i.deleteQueue(e,t),Ki.QueueDeleteOk)}purgeQueue(e){return this.rpc(Ki.QueuePurge,$i.purgeQueue(e),Ki.QueuePurgeOk)}bindQueue(e,t,r,n){return this.rpc(Ki.QueueBind,$i.bindQueue(e,t,r,n),Ki.QueueBindOk)}unbindQueue(e,t,r,n){return this.rpc(Ki.QueueUnbind,$i.unbindQueue(e,t,r,n),Ki.QueueUnbindOk)}assertExchange(e,t,r){return this.rpc(Ki.ExchangeDeclare,$i.assertExchange(e,t,r),Ki.ExchangeDeclareOk).then((t=>({exchange:e})))}checkExchange(e){return this.rpc(Ki.ExchangeDeclare,$i.checkExchange(e),Ki.ExchangeDeclareOk)}deleteExchange(e,t){return this.rpc(Ki.ExchangeDelete,$i.deleteExchange(e,t),Ki.ExchangeDeleteOk)}bindExchange(e,t,r,n){return this.rpc(Ki.ExchangeBind,$i.bindExchange(e,t,r,n),Ki.ExchangeBindOk)}unbindExchange(e,t,r,n){return this.rpc(Ki.ExchangeUnbind,$i.unbindExchange(e,t,r,n),Ki.ExchangeUnbindOk)}publish(e,t,r,n){const i=$i.publish(e,t,n);return this.sendMessage(i,i,r)}sendToQueue(e,t,r){return this.publish("",e,t,r)}consume(e,t,r){const n=$i.consume(e,r);return new Promise(((e,r)=>{this._rpc(Ki.BasicConsume,n,Ki.BasicConsumeOk,((n,i)=>{if(n)return r(n);this.registerConsumer(i.fields.consumerTag,t),e(i.fields)}))}))}async cancel(e){await Qi((t=>{this._rpc(Ki.BasicCancel,$i.cancel(e),Ki.BasicCancelOk,t)}))().then((t=>(this.unregisterConsumer(e),t.fields)))}get(e,t){const r=$i.get(e,t);return new Promise(((e,t)=>{this.sendOrEnqueue(Ki.BasicGet,r,((r,n)=>{if(r)return t(r);if(n.id===Ki.BasicGetEmpty)return e(!1);if(n.id===Ki.BasicGetOk){const t=n.fields;this.handleMessage=Wi((r=>{r.fields=t,e(r)}))}else t(new Error(`Unexpected response to BasicGet: ${Gi(n)}`))}))}))}ack(e,t){this.sendImmediately(Ki.BasicAck,$i.ack(e.fields.deliveryTag,t))}ackAll(){this.sendImmediately(Ki.BasicAck,$i.ack(0,!0))}nack(e,t,r){this.sendImmediately(Ki.BasicNack,$i.nack(e.fields.deliveryTag,t,r))}nackAll(e){this.sendImmediately(Ki.BasicNack,$i.nack(0,!0,e))}reject(e,t){this.sendImmediately(Ki.BasicReject,$i.reject(e.fields.deliveryTag,t))}recover(){return this.rpc(Ki.BasicRecover,$i.recover(),Ki.BasicRecoverOk)}qos(e,t){return this.rpc(Ki.BasicQos,$i.prefetch(e,t),Ki.BasicQosOk)}}Yi.prototype.prefetch=Yi.prototype.qos;class Zi extends Yi{publish(e,t,r,n,i){return this.pushConfirmCallback(i),Yi.prototype.publish.call(this,e,t,r,n)}sendToQueue(e,t,r,n){return this.publish("",e,t,r,n)}waitForConfirms(){const e=[],t=this.unconfirmed;if(t.forEach(((r,n)=>{if(null!==r){const i=new Promise(((e,i)=>{t[n]=t=>{r&&r(t),null===t?e():i(t)}}));e.push(i)}})),!this.pending)for(var r;r=this.unconfirmed.shift();)r&&r(new Error("channel closed"));return Promise.all(e)}}yi.ConfirmChannel=Zi,yi.Channel=Yi,yi.ChannelModel=class extends Pi{constructor(e){super(),this.connection=e,["error","close","blocked","unblocked"].forEach((t=>{e.on(t,this.emit.bind(this,t))}))}close(){return Qi(this.connection.close.bind(this.connection))()}async createChannel(){const e=new Yi(this.connection);return await e.open(),e}async createConfirmChannel(){const e=new Zi(this.connection);return await e.open(),await e.rpc(Ki.ConfirmSelect,{nowait:!1},Ki.ConfirmSelectOk),e}};var Ji=h.connect,Vi=yi.ChannelModel,Xi=r.promisify;var eo=function(e,t){return Xi((function(r){return Ji(e,t,r)}))().then((function(e){return new Vi(e)}))};class to extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...o}=e,{path:a}=e,s=0===a.length?n:`At path: ${a.join(".")} -- ${n}`;super(i??s),null!=i&&(this.cause=s),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function ro(e){return"object"==typeof e&&null!=e}function no(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function io(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:o}=t,{type:a}=r,{refinement:s,message:u=`Expected a value of type \`${a}\`${s?` with refinement \`${s}\``:""}, but received: \`${no(n)}\``}=e;return{value:n,type:a,refinement:s,key:i[i.length-1],path:i,branch:o,...e,message:u}}function*oo(e,t,r,n){var i;ro(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=io(i,t,r,n);e&&(yield e)}}function*ao(e,t,r={}){const{path:n=[],branch:i=[e],coerce:o=!1,mask:a=!1}=r,s={path:n,branch:i};if(o&&(e=t.coercer(e,s),a&&"type"!==t.type&&ro(t.schema)&&ro(e)&&!Array.isArray(e)))for(const r in e)void 0===t.schema[r]&&delete e[r];let u="valid";for(const n of t.validator(e,s))n.explanation=r.message,u="not_valid",yield[n,void 0];for(let[c,l,f]of t.entries(e,s)){const t=ao(l,f,{path:void 0===c?n:[...n,c],branch:void 0===c?i:[...i,l],coerce:o,mask:a,message:r.message});for(const r of t)r[0]?(u=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):o&&(l=r[1],void 0===c?e=l:e instanceof Map?e.set(c,l):e instanceof Set?e.add(l):ro(e)&&(void 0!==l||c in e)&&(e[c]=l))}if("not_valid"!==u)for(const n of t.refiner(e,s))n.explanation=r.message,u="not_refined",yield[n,void 0];"valid"===u&&(yield[void 0,e])}class so{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:o=(e=>e),entries:a=function*(){}}=e;this.type=t,this.schema=r,this.entries=a,this.coercer=o,this.validator=n?(e,t)=>oo(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>oo(i(e,t),t,this,e):()=>[]}assert(e,t){return uo(e,this,t)}create(e,t){return function(e,t,r){const n=co(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}is(e){return function(e,t){const r=co(e,t);return!r[0]}(e,this)}mask(e,t){return function(e,t,r){const n=co(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return co(e,this,t)}}function uo(e,t,r){const n=co(e,t,{message:r});if(n[0])throw n[0]}function co(e,t,r={}){const n=ao(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);if(i[0]){return[new to(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]}return[void 0,i[1]]}function lo(e,t){return new so({type:e,schema:null,validator:t})}function fo(e){const t=e instanceof so?{...e.schema}:{...e};for(const e in t)t[e]=yo(t[e]);return wo(t)}function ho(e){return new so({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${no(e)}`})}function po(e){const t={},r=e.map((e=>no(e))).join();for(const r of e)t[r]=r;return new so({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${r}\`, but received: ${no(t)}`})}function go(e){const t=no(e),r=typeof e;return new so({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${no(r)}`})}function mo(e){return new so({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function vo(){return lo("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${no(e)}`))}function wo(e){const t=e?Object.keys(e):[],r=lo("never",(()=>!1));return new so({type:"object",schema:e||null,*entries(n){if(e&&ro(n)){const i=new Set(Object.keys(n));for(const r of t)i.delete(r),yield[r,n[r],e[r]];for(const e of i)yield[e,n[e],r]}},validator:e=>ro(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>ro(e)?{...e}:e})}function yo(e){return new so({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function bo(){return lo("string",(e=>"string"==typeof e||`Expected a string, but received: ${no(e)}`))}function Eo(e){const t=Object.keys(e);return new so({type:"type",schema:e,*entries(r){if(ro(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>ro(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>ro(e)?{...e}:e})}let Io,Bo,Uo=(e=21)=>{var t;t=e-=0,!Io||Io.length<t?(Io=Buffer.allocUnsafe(128*t),l.randomFillSync(Io),Bo=0):Bo+t>Io.length&&(l.randomFillSync(Io),Bo=0),Bo+=t;let r="";for(let t=Bo-e;t<Bo;t++)r+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&Io[t]];return r};const Co=wo({id:bo(),internal_id:bo(),prompt:bo(),results:yo(bo()),status:po(["pending","queued","in-progress","completed","failed"]),progress:mo(yo(bo())),generation_type:po(["initial","upscaled","remixed"]),discord_channel_id:yo(bo()),discord_server_id:yo(bo()),discord_message_id:yo(bo()),discord_account_id:yo(bo()),discord_image_url:yo(bo()),date_created:yo(bo()),url:mo(bo()),user_created:bo()}),ko=function(...e){const t="type"===e[0].type,r=e.map((e=>e.schema)),n=Object.assign({},...r);return t?Eo(n):wo(n)}(Co,wo({internal_id:yo(bo()),id:yo(bo())}));fo(Eo({age:vo()})),Eo({id:bo(),prompt:bo(),user_created:bo(),date_created:bo(),status:po(["pending","queued","in-progress","completed","failed"]),progress:mo(yo(bo())),url:mo(bo()),results:yo(bo())}),wo({event:go("images.items.read"),query:wo({fields:ho(bo()),sort:yo(ho(bo())),limit:yo(vo()),page:yo(vo()),filter:yo(wo({id:yo(wo())})),aggregate:yo(wo({count:ho()}))}),collection:go("images")});var xo=({filter:e,action:t,init:r},{services:n,env:i,logger:o})=>{let a;r("app.before",(async()=>{o.info("Connecting to RabbitMQ");const e=await eo(`amqp://${process.env.RABBITMQ_USER}:${process.env.RABBITMQ_PASSWORD}@${process.env.RABBITMQ_HOST}:${process.env.RABBITMQ_PORT}/`);a=await e.createChannel();const t=await e.createChannel(),r="bot_status";await t.assertQueue(r,{durable:!0}),o.info(`Created queue "${r}"`),t.consume(r,(async e=>{if(o.info('Received message from queue "bot_status":',e),e){const r=JSON.parse(e.content.toString());try{uo(r,wo({status:po(["starting","healthy","unhealthy","paused"]),message:yo(bo())}))}catch(r){return o.error("Could not parse bot status",r),void t.nack(e)}try{const i=new n.StatusService({});await i.createOne({status:r.status,message:r.message}),o.info("Saved bot status",r),t.ack(e)}catch(r){return console.log("%cindex.ts line:57 e","color: #007acc;",r),o.error("Could not save bot status",r),void t.nack(e)}}}))})),e("images.items.update",(async(e,t,r)=>{if(uo(e,fo(Co)),e.discord_image_url){o.info("Importing image from discord",e);const t=new n.FilesService({schema:r.schema}),a=await t.importOne(e.discord_image_url,{title:e.prompt,filename_download:Uo()}),s=await t.readOne(a);e.results=a,e.url=`${i.PUBLIC_URL}/assets/${s.id}/${s.filename_disk}`}return e})),e("images.items.create",(async(e,t,r)=>(uo(e,fo(ko)),e.internal_id||(e.internal_id=Uo()),e))),t("images.items.create",(async({payload:e,key:t},r)=>{uo(e,fo(ko));const n="prompts";await a.assertQueue(n,{durable:!0}),o.info(`Created queue "${n}"`);const i=wo({type:po(["generate image"]),prompt:bo(),imageId:bo(),internalImageId:bo()});if(e.prompt){o.info(`Sending message to queue "prompts": ${e.prompt}`);const r={type:"generate image",prompt:e.prompt,imageId:t,internalImageId:e.internal_id};uo(r,i),a.sendToQueue(n,Buffer.from(JSON.stringify(r)))}return e}))};module.exports=xo;
